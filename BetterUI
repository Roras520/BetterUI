--[[
    Vynixus UI Library (Renamed from BetterUI)
    Created by Stacm/Stack
    Build 1.4.0
    Date: 2025-11-03
    Changelogs:
    - Unified object creation/signals via Creator helpers (gpt idea)
    - Theme system: merge support
    - New themes: OLED, Apple (trash rn), Halloween, Cyber, Lavender, Neon, Sky, Arctic
    - Window controls: minimize, fullscreen toggle, and close buttons
    - Tab indicator: improved animation with overshoot, also fixed accent bar duplication bug
    - Tabs: anti-spam rate limit for switching
    - Ripple: corrected mouse positioning (Gui inset) and smoother animation
    - Dropdowns: theme-aware, hidden scrollbars, ripple on button, shows selected
    - Multi-dropdown: button shows selected items, animated accent bars
    - Safer loader and function refactor
    - General cleanup and stability improvements
    - Flags API: Vynixus.Flags (Get/Set/OnChange/Export/Import)
    - Elements wired to flags
    - Added Vynixus.Destroy and used in Close button
    - Disconnected stored signals on cleanup
]]

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local TextService = game:GetService("TextService")

local LocalPlayer = Players.LocalPlayer
local CoreGui = game:GetService("CoreGui") or LocalPlayer.PlayerGui

local VYNIXUS_LOADED = _G.VYNIXUS_LOADED

if VYNIXUS_LOADED then
	for _, gui in pairs(CoreGui:GetChildren()) do
		if gui.Name == "VynixusUI" or gui.Name == "VynixusUILoading" or gui.Name == "Notifications" then
			gui:Destroy()
		end
	end
	if _G.Vynixus and _G.Vynixus.ScreenGui and _G.Vynixus.ScreenGui.Parent then
		_G.Vynixus.ScreenGui:Destroy()
	end
	_G.Vynixus = nil
	_G.VYNIXUS_LOADED = false
end

if not game:IsLoaded() then
	game.Loaded:Wait()
end

_G.VYNIXUS_LOADED = true

local Vynixus = {}
_G.Vynixus = Vynixus

local moduleCache = {}

local function SafeLoad(sources)
	for _, source in ipairs(sources or {}) do
		local ok, result
		if typeof(source) == "function" then
			ok, result = pcall(source)
			if ok and result then return result end
		elseif typeof(source) == "string" then
			if moduleCache[source] ~= nil then
				return moduleCache[source]
			end
			ok, result = pcall(function()
				local code = game:HttpGet(source, true)
				if code and code ~= "" then
					return loadstring(code)()
				end
			end)
			if ok and result then
				moduleCache[source] = result
				return result
			end
		end
	end
	return nil
end

Vynixus.SafeLoad = SafeLoad

-- Zero need for a safe load, all I needed to do is just paste the original module code into here but I guess I just wanted to code something for fun.
local MODULES = {
	Acrylic = function()
		local module = SafeLoad({
			"https://raw.githubusercontent.com/Number2189/UI/refs/heads/main/AcrylicBlur",
			function()
				local v0=game:GetService("Lighting");local v1=workspace.CurrentCamera;local v2=Vector2.new(10,10);local v3=0.01;local v4=1 -1e-7 ;local v5=0.25;local v6=Instance.new("DepthOfFieldEffect");v6.FarIntensity=0;v6.NearIntensity=v5;v6.FocusDistance=0.25;v6.InFocusRadius=0;v6.Parent=v0;local v12={};local v13={};local v14={};local v15={};v15.__index=v15;function rayPlaneIntersect(v21,v22,v23,v24) local v25=v22;local v26=v24;local v27=v23-v21 ;local v28=(v25.x * v27.x) + (v25.y * v27.y) + (v25.z * v27.z) ;local v29=(v25.x * v26.x) + (v25.y * v26.y) + (v25.z * v26.z) ;local v30= -v28/v29 ;return v23 + (v30 * v24) ,v30;end function rebuildPartsList() v12={};v13={};for v74,v75 in pairs(v14) do table.insert(v12,v75);table.insert(v13,v74);end end v15.new=function(v31,v32) local v33=Instance.new("Part");v33.Size=Vector3.new(1,1,1) * 0.01 ;v33.Anchored=true;v33.CanCollide=false;v33.CanTouch=false;v33.Material=Enum.Material.Glass;v33.Transparency=v4;v33.Parent=workspace.CurrentCamera;local v43;if (v32=="Rectangle") then v43=Instance.new("BlockMesh");v43.Parent=v33;elseif (v32=="Oval") then v43=Instance.new("SpecialMesh");v43.MeshType=Enum.MeshType.Sphere;v43.Parent=v33;end local v44=false;local v45=v31;while true do v45=v45.Parent;if (v45 and v45:IsA("ScreenGui")) then v44=v45.IgnoreGuiInset;break;elseif (v45==nil) then break;end end local v46=setmetatable({Frame=v31,Part=v33,Mesh=v43,IgnoreGuiInset=v44},v15);v14[v46]=v33;rebuildPartsList();game:GetService("RunService"):BindToRenderStep("AcrylicBlur_"   .. tostring(v46) ,Enum.RenderPriority.Camera.Value + 1 ,function() v33.CFrame=v1.CFrame * CFrame.new(0,0,0) ;v15.updateAll();end);return v46;end;function updateGui(v48) if  not v48.Frame.Visible then v48.Part.Transparency=1;return;end local v49=workspace.CurrentCamera;local v50=v48.Frame;local v51=v48.Part;local v52=v48.Mesh;v51.Transparency=v4;local v54=v50.AbsolutePosition;local v55=v50.AbsoluteSize;local v56=v54 + v2 ;local v57=(v56 + v55) -(v2 * 2) ;v56=Vector2.new(math.max(v56.X,v54.X),math.max(v56.Y,v54.Y));v57=Vector2.new(math.min(v57.X,v54.X + v55.X ),math.min(v57.Y,v54.Y + v55.Y ));local v58,v59;if v48.IgnoreGuiInset then v58=v49:ViewportPointToRay(v56.X,v56.Y,1);v59=v49:ViewportPointToRay(v57.X,v57.Y,1);else v58=v49:ScreenPointToRay(v56.X,v56.Y,1);v59=v49:ScreenPointToRay(v57.X,v57.Y,1);end local v60=v49.CFrame.Position + (v49.CFrame.LookVector * (0.05 -v49.NearPlaneZ)) ;local v61=v49.CFrame.LookVector;local v62=rayPlaneIntersect(v60,v61,v58.Origin,v58.Direction);local v63=rayPlaneIntersect(v60,v61,v59.Origin,v59.Direction);local v62=v49.CFrame:PointToObjectSpace(v62);local v63=v49.CFrame:PointToObjectSpace(v63);local v64=v63-v62 ;local v65=(v62 + v63)/2 ;v52.Offset=v65;v52.Scale=v64/v3 ;end v15.updateAll=function() for v78=1, #v13 do updateGui(v13[v78]);end if ( #v12>0) then local v81={};for v84=1, #v12 do v81[v84]=workspace.CurrentCamera.CFrame;end local v82={};for v87=1, #v12 do if ((typeof(v12[v87])=="Instance") and v12[v87]:IsA("BasePart")) then table.insert(v82,v12[v87]);end end workspace:BulkMoveTo(v82,v81,Enum.BulkMoveMode.FireCFrameChanged);end v6.FocusDistance=0.25 -v1.NearPlaneZ ;end;v15.Destroy=function(v69) game:GetService("RunService"):UnbindFromRenderStep("AcrylicBlur_"   .. tostring(v69) );v69.Part:Destroy();v14[v69]=nil;rebuildPartsList();end;v15.SetIntensity=function(v71,v72) v6.NearIntensity=v72;end;return v15;
			end,
		})
		return module
	end,
	Notifications = function()
		local module = SafeLoad({
			"https://raw.githubusercontent.com/Roras520/Lib/refs/heads/main/Notifications",
			function()
				local v0={};local v1=false;local v2=_G.Stack_NotificationsLibrary~=nil ;local v3=0.3;local v4=6;local v5=1;local v6=20;local function v7() local v8=game:GetService("Players");local v9=game:GetService("TweenService");local v10=game:GetService("VRService");local v11=game:GetService("RunService");local v12,v13=pcall(function() return loadstring(game:HttpGet("https://raw.githubusercontent.com/Number2189/UI/refs/heads/main/Utils"))();end);if  not v12 then warn("Failed to load Utils:",v13);return nil;end local v14=v8.LocalPlayer;local v15=(v11:IsStudio() and v14.PlayerGui) or game:GetService("CoreGui") ;local v16,v17=pcall(function() return v14.Character or v14.CharacterAdded:Wait() ;end);if  not v16 then warn("Failed to get character:",v17);return nil;end local v18=v17:FindFirstChild("Head");local v19={MaxNotifications=5,Cooldown=0.6,MessageLifetime=4,SizePC=UDim2.new(0,250,0,60),SizeVR=Vector3.new(2,1,0.1),TextColor=Color3.fromRGB(255,255,255),Font=Enum.Font.Code,TextSizePC=28,TextSizeVR=30.47,SpacingPC=8,SpacingVR=0.75,VROffset=Vector3.new(0,1.06,3),Enabled=true};local v20={Queue={},LastSendTime=0,ActiveCount=0};local v21,v22,v23,v24,v25;local v26=false;local v27="";local v28=false;local function v29() local v34=tick();local v35=v19.MessageLifetime;local v36=v19.MaxNotifications;for v98= #v20.Queue,1, -1 do if (v20.Queue[v98] and ((v34-v20.Queue[v98].time)>v35)) then table.remove(v20.Queue,v98);v20.ActiveCount-=1 end end while  #v20.Queue>v36  do table.remove(v20.Queue,1);v20.ActiveCount-=1 end local v37={};for v99,v100 in ipairs(v20.Queue) do table.insert(v37,v100.text);end if v25 then v25.Text=table.concat(v37,"\n");v25.Visible=v19.Enabled and ( #v20.Queue>0) ;end end local function v30(v38,v39) if  not v19.Enabled then return;end if (v10.VREnabled and v26) then return;end if ((tick() -v20.LastSendTime)<v19.Cooldown) then return;end if (v20.ActiveCount>=v19.MaxNotifications) then return;end local v40=Instance.new("Frame");v40.Name="Notif";v40.Parent=v22;v40.BackgroundColor3=Color3.new(0.0784314,0.0784314,0.0980392);v40.BackgroundTransparency=0.25;v40.BorderColor3=Color3.new(0,0,0);v40.BorderSizePixel=0;v40.Position=UDim2.new(0.698148131,0,0.91481483,0);v40.Size=UDim2.new(0,298,0,51);v13.CreateCorner(v40,v4);local v49=Instance.new("TextLabel");v49.Name="Title";v49.Parent=v40;v49.BackgroundTransparency=1;v49.BorderSizePixel=0;v49.Position=UDim2.new(0.0449179821,0,0.156111494,0);v49.Size=UDim2.new(0,310,0,17);v49.Font=Enum.Font.SourceSansSemibold;v49.Text=v39 or "Title" ;v49.TextColor3=Color3.new(1,1,1);v49.TextSize=16;v49.TextXAlignment=Enum.TextXAlignment.Left;local v63=Instance.new("TextLabel");v63.Name="Description";v63.Parent=v40;v63.BackgroundTransparency=1;v63.BorderSizePixel=0;v63.Position=UDim2.new(0.0432063378,0,0.502512991,0);v63.Size=UDim2.new(0,301,0,17);v63.Font=Enum.Font.SourceSans;v63.Text=v38 or "" ;v63.TextColor3=Color3.new(1,1,1);v63.TextSize=14;v63.TextXAlignment=Enum.TextXAlignment.Left;v20.LastSendTime=tick();v20.ActiveCount+=1 task.delay(v19.MessageLifetime,function() if v40.Parent then v13.Tween(v40,{Position=UDim2.new(v5,v6,0,0),BackgroundTransparency=1},v3,Enum.EasingStyle.Quart):Play();v13.Tween(v49,{TextTransparency=1},v3,Enum.EasingStyle.Quart):Play();v13.Tween(v63,{TextTransparency=1},v3,Enum.EasingStyle.Quart):Play();task.wait(v3);v40:Destroy();v20.ActiveCount-=1 end end);end local function v31(v77,v78) if (v10.VREnabled and  not v26) then if  not v28 then v28=true;v30(v27 or "VR setup failed" ,"Notification Launch Error");end v30(v77,v78);return;end if  not (v19.Enabled and v10.VREnabled and v26) then return;end if ((tick() -v20.LastSendTime)<v19.Cooldown) then return;end v20.LastSendTime=tick();v20.ActiveCount+=1 table.insert(v20.Queue,{text=v77,time=tick()});if  not v1 then v1=true;v11:BindToRenderStep("UpdateVRNotifications",1,v29);end v29();end if (v10.VREnabled and v18) then local v101,v102=pcall(function() v23=Instance.new("Part");v23.Anchored=false;v23.CanCollide=false;v23.CanQuery=false;v23.CanTouch=false;v23.Massless=true;v23.Transparency=1;v23.Size=v19.SizeVR;v23.Parent=workspace;v24=Instance.new("SurfaceGui");v24.Face=Enum.NormalId.Back;v24.Adornee=v23;v24.AlwaysOnTop=true;v24.Parent=v23;v25=Instance.new("TextLabel");v25.BackgroundTransparency=1;v25.TextColor3=v19.TextColor;v25.Font=v19.Font;v25.TextSize=v19.TextSizeVR;v25.Size=UDim2.new(1,0,1,0);v25.TextYAlignment=Enum.TextYAlignment.Top;v25.Visible=false;v25.Parent=v24;v23.CFrame=v18.CFrame * CFrame.new(v19.VROffset) ;local v134=Instance.new("Weld");v134.Name="NotifWeld";v134.Part0=v18;v134.Part1=v23;v134.C1=CFrame.new(0,v19.SpacingVR,1);v134.Parent=v23;v23.CFrame=CFrame.new(v23.Position,v18.Position);v26=true;end);if  not v101 then warn("VR Notification Setup Failed:",tostring(v102));v27=tostring(v102);v26=false;end elseif (v10.VREnabled and  not v18) then v27="LocalHead not found";warn("VR Notification Setup Failed:",v27);v26=false;end local v32,v33=pcall(function() v21=Instance.new("ScreenGui");v21.IgnoreGuiInset=true;v21.Parent=v15;v22=Instance.new("Frame");v22.BackgroundTransparency=1;v22.Size=UDim2.new(0,320,0,300 + (70 * v19.MaxNotifications) );v22.AnchorPoint=Vector2.new(1,1);v22.Position=UDim2.new(0.98,0,0.98,0);v22.Parent=v21;local v87=Instance.new("UIListLayout");v87.Padding=UDim.new(0,v19.SpacingPC);v87.SortOrder=Enum.SortOrder.LayoutOrder;v87.VerticalAlignment=Enum.VerticalAlignment.Bottom;v87.HorizontalAlignment=Enum.HorizontalAlignment.Right;v87.Parent=v22;end);if  not v32 then warn("PC Notification Setup Failed:",tostring(v33));end return {SendNotification=function(v96,v97) if v10.VREnabled then v31(v96,v97);else v30(v96,v97);end end,ClearNotifications=function() for v103,v104 in ipairs(v22:GetChildren()) do if v104:IsA("Frame") then v104:Destroy();end end end,GetNotificationSettings=function() return v19;end};end if  not v2 then _G.Stack_NotificationsLibrary=v7();end v0=_G.Stack_NotificationsLibrary;return v0;
			end,
		})
		return module
	end,
}

local function createDefaultTheme()
	return {
		Accent = Color3.fromRGB(86, 195, 245),
		ElementColor = Color3.fromRGB(110, 110, 110),
		ElementBorder = Color3.fromRGB(25, 25, 25),
		TextColor = Color3.fromRGB(230, 230, 230),
		SubTextColor = Color3.fromRGB(160, 160, 160),
		SectionBG = Color3.fromRGB(35, 35, 35),
		MainBG = Color3.fromRGB(35, 35, 35),
		TitleBarLine = Color3.fromRGB(65, 65, 65),
		TabUnselected = Color3.fromRGB(90, 90, 90),
		SectionBorder = Color3.fromRGB(45, 45, 50),

		ToggleKnobColor = Color3.fromRGB(255, 255, 255),
		ToggleKnobTransparency = 0,
		ToggleKnobTransparencyOff = 0.5,
		ToggleSliderBackgroundColor = Color3.fromRGB(86, 195, 245),
		ToggleSliderBackgroundTransparency = 0,
		ToggleSliderBackgroundTransparencyOff = 1,
		ToggleSliderStrokeColor = Color3.fromRGB(110, 110, 110),
		ToggleSliderStrokeTransparency = 0.5,
		ToggleSliderStrokeTransparencyOff = 0.5,

		SliderRailColor = Color3.fromRGB(110, 110, 110),
		SliderRailTransparency = 0.4,
		SliderFillColor = Color3.fromRGB(86, 195, 245),
		SliderFillTransparency = 0,
		SliderDotColor = Color3.fromRGB(86, 195, 245),
		SliderDotTransparency = 0,
		SliderBackgroundTransparency = 0.87,

		ColorPreviewTransparency = 0,

		TitleBarLineTransparency = 0.5,
		SectionBorderTransparency = 0.8,
		SectionBackgroundTransparency = 0.24,

		ElementTransparency = 0.87,
		ElementTransparencyHover = 0.8,
		ElementTransparencyPress = 0.94,

		MainBorderTransparency = 0.8,
		TabSelectedLineTransparency = 0.24,

		KeybindButtonTransparency = 0.9,
		KeybindButtonStrokeTransparency = 0.5,

		InputTransparency = 0.87,
		InputValueBoxTransparency = 0.8,
		InputValueBoxStrokeTransparency = 0.6,

		RGBSlidersContainerTransparency = 0.87,
		RGBSlidersContainerStrokeTransparency = 0.5,
		RGBSliderBarTransparency = 0,

		DropdownButtonTransparency = 0.7,
		DropdownButtonStrokeTransparency = 0.5,
	}
end

local function mergeTheme(customTheme, baseTheme)
	local merged = {}
	local default = createDefaultTheme()

	for key, value in pairs(baseTheme or default) do
		merged[key] = value
	end

	if customTheme then
		for key, value in pairs(customTheme) do
			merged[key] = value
		end
	end

	return merged
end

THEMES = {
	Default = createDefaultTheme(),
	Midnight = mergeTheme({
		Accent = Color3.fromRGB(120, 130, 255),
		ElementColor = Color3.fromRGB(85, 90, 110),
		ElementBorder = Color3.fromRGB(20, 25, 35),
		TextColor = Color3.fromRGB(220, 225, 240),
		SubTextColor = Color3.fromRGB(140, 145, 165),
		SectionBG = Color3.fromRGB(25, 30, 45),
		MainBG = Color3.fromRGB(18, 22, 35),
		TitleBarLine = Color3.fromRGB(50, 55, 75),
		TabUnselected = Color3.fromRGB(70, 75, 95),
		SectionBorder = Color3.fromRGB(40, 45, 65),
		ToggleSliderBackgroundColor = Color3.fromRGB(120, 130, 255),
		ToggleSliderStrokeColor = Color3.fromRGB(85, 90, 110),
		SliderRailColor = Color3.fromRGB(85, 90, 110),
		SliderFillColor = Color3.fromRGB(120, 130, 255),
		SliderDotColor = Color3.fromRGB(120, 130, 255),
	}),
	Aqua = {
		Accent = Color3.fromRGB(0, 255, 255),
		ElementColor = Color3.fromRGB(70, 115, 115),
		ElementBorder = Color3.fromRGB(15, 35, 35),
		TextColor = Color3.fromRGB(220, 245, 245),
		SubTextColor = Color3.fromRGB(140, 185, 185),
		SectionBG = Color3.fromRGB(20, 40, 45),
		MainBG = Color3.fromRGB(15, 30, 35),
		TitleBarLine = Color3.fromRGB(45, 75, 80),
		TabUnselected = Color3.fromRGB(60, 95, 100),
		SectionBorder = Color3.fromRGB(35, 65, 70),
	},
	Amethyst = {
		Accent = Color3.fromRGB(200, 120, 255),
		ElementColor = Color3.fromRGB(100, 85, 120),
		ElementBorder = Color3.fromRGB(30, 20, 40),
		TextColor = Color3.fromRGB(235, 220, 245),
		SubTextColor = Color3.fromRGB(175, 150, 190),
		SectionBG = Color3.fromRGB(35, 25, 50),
		MainBG = Color3.fromRGB(25, 18, 40),
		TitleBarLine = Color3.fromRGB(65, 50, 85),
		TabUnselected = Color3.fromRGB(80, 65, 100),
		SectionBorder = Color3.fromRGB(50, 40, 70),
	},
	Rose = {
		Accent = Color3.fromRGB(255, 100, 150),
		ElementColor = Color3.fromRGB(120, 85, 100),
		ElementBorder = Color3.fromRGB(40, 20, 30),
		TextColor = Color3.fromRGB(245, 220, 230),
		SubTextColor = Color3.fromRGB(190, 150, 170),
		SectionBG = Color3.fromRGB(45, 25, 35),
		MainBG = Color3.fromRGB(35, 18, 28),
		TitleBarLine = Color3.fromRGB(80, 50, 65),
		TabUnselected = Color3.fromRGB(100, 65, 80),
		SectionBorder = Color3.fromRGB(65, 40, 55),
	},
	Dark = {
		Accent = Color3.fromRGB(100, 180, 255),
		ElementColor = Color3.fromRGB(60, 60, 60),
		ElementBorder = Color3.fromRGB(15, 15, 15),
		TextColor = Color3.fromRGB(220, 220, 220),
		SubTextColor = Color3.fromRGB(150, 150, 150),
		SectionBG = Color3.fromRGB(25, 25, 25),
		MainBG = Color3.fromRGB(20, 20, 20),
		TitleBarLine = Color3.fromRGB(50, 50, 50),
		TabUnselected = Color3.fromRGB(70, 70, 70),
		SectionBorder = Color3.fromRGB(35, 35, 35),
	},
	Darker = {
		Accent = Color3.fromRGB(80, 160, 230),
		ElementColor = Color3.fromRGB(40, 40, 40),
		ElementBorder = Color3.fromRGB(10, 10, 10),
		TextColor = Color3.fromRGB(210, 210, 210),
		SubTextColor = Color3.fromRGB(130, 130, 130),
		SectionBG = Color3.fromRGB(15, 15, 15),
		MainBG = Color3.fromRGB(10, 10, 10),
		TitleBarLine = Color3.fromRGB(35, 35, 35),
		TabUnselected = Color3.fromRGB(50, 50, 50),
		SectionBorder = Color3.fromRGB(25, 25, 25),
	},
	Light = {
		Accent = Color3.fromRGB(50, 150, 255),
		ElementColor = Color3.fromRGB(220, 220, 220),
		ElementBorder = Color3.fromRGB(180, 180, 180),
		TextColor = Color3.fromRGB(30, 30, 30),
		SubTextColor = Color3.fromRGB(90, 90, 90),
		SectionBG = Color3.fromRGB(245, 245, 245),
		MainBG = Color3.fromRGB(250, 250, 250),
		TitleBarLine = Color3.fromRGB(200, 200, 200),
		TabUnselected = Color3.fromRGB(210, 210, 210),
		SectionBorder = Color3.fromRGB(190, 190, 190),
	},
	Ocean = {
		Accent = Color3.fromRGB(30, 180, 255),
		ElementColor = Color3.fromRGB(70, 100, 130),
		ElementBorder = Color3.fromRGB(20, 40, 60),
		TextColor = Color3.fromRGB(220, 235, 245),
		SubTextColor = Color3.fromRGB(150, 175, 195),
		SectionBG = Color3.fromRGB(25, 45, 65),
		MainBG = Color3.fromRGB(18, 35, 52),
		TitleBarLine = Color3.fromRGB(50, 70, 95),
		TabUnselected = Color3.fromRGB(65, 85, 110),
		SectionBorder = Color3.fromRGB(40, 60, 85),
	},
	Forest = {
		Accent = Color3.fromRGB(100, 220, 120),
		ElementColor = Color3.fromRGB(70, 100, 75),
		ElementBorder = Color3.fromRGB(20, 35, 25),
		TextColor = Color3.fromRGB(220, 240, 225),
		SubTextColor = Color3.fromRGB(150, 180, 155),
		SectionBG = Color3.fromRGB(25, 40, 30),
		MainBG = Color3.fromRGB(18, 30, 22),
		TitleBarLine = Color3.fromRGB(50, 70, 55),
		TabUnselected = Color3.fromRGB(65, 90, 70),
		SectionBorder = Color3.fromRGB(40, 60, 45),
	},
	Sunset = {
		Accent = Color3.fromRGB(255, 150, 80),
		ElementColor = Color3.fromRGB(120, 90, 80),
		ElementBorder = Color3.fromRGB(40, 25, 20),
		TextColor = Color3.fromRGB(245, 230, 220),
		SubTextColor = Color3.fromRGB(190, 160, 150),
		SectionBG = Color3.fromRGB(50, 35, 30),
		MainBG = Color3.fromRGB(40, 28, 23),
		TitleBarLine = Color3.fromRGB(80, 60, 50),
		TabUnselected = Color3.fromRGB(100, 75, 65),
		SectionBorder = Color3.fromRGB(65, 50, 45),
	},
	Cherry = {
		Accent = Color3.fromRGB(255, 80, 120),
		ElementColor = Color3.fromRGB(110, 75, 85),
		ElementBorder = Color3.fromRGB(35, 20, 25),
		TextColor = Color3.fromRGB(245, 220, 230),
		SubTextColor = Color3.fromRGB(185, 150, 165),
		SectionBG = Color3.fromRGB(40, 25, 30),
		MainBG = Color3.fromRGB(30, 18, 23),
		TitleBarLine = Color3.fromRGB(70, 50, 60),
		TabUnselected = Color3.fromRGB(90, 65, 75),
		SectionBorder = Color3.fromRGB(60, 40, 50),
	},
	Grape = {
		Accent = Color3.fromRGB(180, 100, 255),
		ElementColor = Color3.fromRGB(95, 75, 115),
		ElementBorder = Color3.fromRGB(30, 20, 40),
		TextColor = Color3.fromRGB(235, 220, 245),
		SubTextColor = Color3.fromRGB(170, 145, 190),
		SectionBG = Color3.fromRGB(35, 25, 50),
		MainBG = Color3.fromRGB(25, 18, 38),
		TitleBarLine = Color3.fromRGB(65, 50, 80),
		TabUnselected = Color3.fromRGB(80, 60, 95),
		SectionBorder = Color3.fromRGB(55, 40, 70),
	},
	Crimson = {
		Accent = Color3.fromRGB(220, 50, 80),
		ElementColor = Color3.fromRGB(100, 65, 75),
		ElementBorder = Color3.fromRGB(30, 15, 20),
		TextColor = Color3.fromRGB(240, 215, 220),
		SubTextColor = Color3.fromRGB(180, 140, 150),
		SectionBG = Color3.fromRGB(40, 20, 28),
		MainBG = Color3.fromRGB(30, 15, 20),
		TitleBarLine = Color3.fromRGB(70, 45, 55),
		TabUnselected = Color3.fromRGB(85, 55, 65),
		SectionBorder = Color3.fromRGB(60, 35, 45),
	},
	Emerald = {
		Accent = Color3.fromRGB(80, 255, 150),
		ElementColor = Color3.fromRGB(65, 105, 85),
		ElementBorder = Color3.fromRGB(18, 35, 25),
		TextColor = Color3.fromRGB(215, 245, 230),
		SubTextColor = Color3.fromRGB(145, 185, 165),
		SectionBG = Color3.fromRGB(22, 42, 32),
		MainBG = Color3.fromRGB(15, 32, 23),
		TitleBarLine = Color3.fromRGB(45, 75, 60),
		TabUnselected = Color3.fromRGB(60, 95, 75),
		SectionBorder = Color3.fromRGB(35, 65, 50),
	},
	Gold = {
		Accent = Color3.fromRGB(255, 200, 50),
		ElementColor = Color3.fromRGB(115, 100, 70),
		ElementBorder = Color3.fromRGB(35, 30, 18),
		TextColor = Color3.fromRGB(245, 235, 210),
		SubTextColor = Color3.fromRGB(185, 170, 140),
		SectionBG = Color3.fromRGB(45, 40, 25),
		MainBG = Color3.fromRGB(35, 30, 18),
		TitleBarLine = Color3.fromRGB(75, 65, 45),
		TabUnselected = Color3.fromRGB(95, 85, 60),
		SectionBorder = Color3.fromRGB(65, 55, 35),
	},
	OLED = {
		Accent = Color3.fromRGB(255, 255, 255),
		ElementColor = Color3.fromRGB(15, 15, 15),
		ElementBorder = Color3.fromRGB(0, 0, 0),
		TextColor = Color3.fromRGB(255, 255, 255),
		SubTextColor = Color3.fromRGB(140, 140, 140),
		SectionBG = Color3.fromRGB(5, 5, 5),
		MainBG = Color3.fromRGB(0, 0, 0),
		TitleBarLine = Color3.fromRGB(20, 20, 20),
		TabUnselected = Color3.fromRGB(10, 10, 10),
		SectionBorder = Color3.fromRGB(8, 8, 8),
	},
	Apple = mergeTheme({
		Accent = Color3.fromRGB(102, 217, 104),
		ElementColor = Color3.fromRGB(50, 50, 50),
		ElementBorder = Color3.fromRGB(60, 60, 60),
		TextColor = Color3.fromRGB(255, 255, 255),
		SubTextColor = Color3.fromRGB(174, 174, 178),
		SectionBG = Color3.fromRGB(45, 45, 45),
		MainBG = Color3.fromRGB(40, 40, 40),
		TitleBarLine = Color3.fromRGB(55, 55, 55),
		TabUnselected = Color3.fromRGB(45, 45, 45),
		SectionBorder = Color3.fromRGB(55, 55, 55),

		ToggleKnobColor = Color3.fromRGB(255, 255, 255),
		ToggleKnobTransparency = 0,
		ToggleKnobTransparencyOff = 0,
		ToggleSliderBackgroundColor = Color3.fromRGB(102, 217, 104),
		ToggleSliderBackgroundTransparency = 0,
		ToggleSliderBackgroundTransparencyOff = 0.9,
		ToggleSliderStrokeColor = Color3.fromRGB(60, 60, 60),
		ToggleSliderStrokeTransparency = 0.24,
		ToggleSliderStrokeTransparencyOff = 0.24,

		SliderRailColor = Color3.fromRGB(55, 55, 55),
		SliderRailTransparency = 0.3,
		SliderFillColor = Color3.fromRGB(102, 217, 104),
		SliderFillTransparency = 0,
		SliderDotColor = Color3.fromRGB(102, 217, 104),
		SliderDotTransparency = 0,
		SliderBackgroundTransparency = 0.85,

		ColorPreviewTransparency = 0,

		TitleBarLineTransparency = 0.6,
		SectionBorderTransparency = 0.8,
		SectionBackgroundTransparency = 0.4,

		ElementTransparency = 0.85,
		ElementTransparencyHover = 0.8,
		ElementTransparencyPress = 0.75,

		MainBorderTransparency = 0.8,
		TabSelectedLineTransparency = 0,

		KeybindButtonTransparency = 0.85,
		KeybindButtonStrokeTransparency = 0.8,

		InputTransparency = 0.85,
		InputValueBoxTransparency = 0.83,
		InputValueBoxStrokeTransparency = 0.75,

		RGBSlidersContainerTransparency = 0.85,
		RGBSlidersContainerStrokeTransparency = 0.8,
		RGBSliderBarTransparency = 0,

		DropdownButtonTransparency = 0.85,
		DropdownButtonStrokeTransparency = 0.8,
	}),
	Halloween = {
		Accent = Color3.fromRGB(255, 140, 0),
		ElementColor = Color3.fromRGB(120, 80, 60),
		ElementBorder = Color3.fromRGB(40, 25, 20),
		TextColor = Color3.fromRGB(255, 200, 150),
		SubTextColor = Color3.fromRGB(200, 150, 100),
		SectionBG = Color3.fromRGB(50, 35, 30),
		MainBG = Color3.fromRGB(35, 25, 20),
		TitleBarLine = Color3.fromRGB(90, 60, 40),
		TabUnselected = Color3.fromRGB(100, 70, 50),
		SectionBorder = Color3.fromRGB(70, 50, 40),
	},
	Cyber = {
		Accent = Color3.fromRGB(0, 255, 255),
		ElementColor = Color3.fromRGB(50, 150, 180),
		ElementBorder = Color3.fromRGB(10, 40, 60),
		TextColor = Color3.fromRGB(200, 255, 255),
		SubTextColor = Color3.fromRGB(100, 200, 220),
		SectionBG = Color3.fromRGB(15, 30, 45),
		MainBG = Color3.fromRGB(10, 20, 35),
		TitleBarLine = Color3.fromRGB(0, 180, 220),
		TabUnselected = Color3.fromRGB(40, 130, 160),
		SectionBorder = Color3.fromRGB(30, 100, 140),
	},
	Lavender = {
		Accent = Color3.fromRGB(200, 150, 255),
		ElementColor = Color3.fromRGB(140, 120, 160),
		ElementBorder = Color3.fromRGB(55, 45, 70),
		TextColor = Color3.fromRGB(255, 250, 255),
		SubTextColor = Color3.fromRGB(220, 200, 240),
		SectionBG = Color3.fromRGB(70, 60, 85),
		MainBG = Color3.fromRGB(55, 50, 70),
		TitleBarLine = Color3.fromRGB(160, 140, 190),
		TabUnselected = Color3.fromRGB(130, 110, 170),
		SectionBorder = Color3.fromRGB(110, 95, 150),
	},
	Neon = {
		Accent = Color3.fromRGB(255, 0, 255),
		ElementColor = Color3.fromRGB(120, 60, 140),
		ElementBorder = Color3.fromRGB(40, 20, 50),
		TextColor = Color3.fromRGB(255, 200, 255),
		SubTextColor = Color3.fromRGB(220, 150, 230),
		SectionBG = Color3.fromRGB(60, 30, 75),
		MainBG = Color3.fromRGB(45, 20, 60),
		TitleBarLine = Color3.fromRGB(180, 80, 200),
		TabUnselected = Color3.fromRGB(140, 70, 160),
		SectionBorder = Color3.fromRGB(100, 50, 120),
	},
	Sky = {
		Accent = Color3.fromRGB(135, 206, 255),
		ElementColor = Color3.fromRGB(100, 140, 170),
		ElementBorder = Color3.fromRGB(30, 60, 85),
		TextColor = Color3.fromRGB(240, 250, 255),
		SubTextColor = Color3.fromRGB(180, 210, 230),
		SectionBG = Color3.fromRGB(40, 70, 95),
		MainBG = Color3.fromRGB(30, 55, 80),
		TitleBarLine = Color3.fromRGB(80, 130, 165),
		TabUnselected = Color3.fromRGB(70, 110, 140),
		SectionBorder = Color3.fromRGB(55, 90, 120),
	},
	Arctic = {
		Accent = Color3.fromRGB(173, 216, 230),
		ElementColor = Color3.fromRGB(140, 160, 180),
		ElementBorder = Color3.fromRGB(50, 70, 90),
		TextColor = Color3.fromRGB(240, 248, 255),
		SubTextColor = Color3.fromRGB(180, 200, 220),
		SectionBG = Color3.fromRGB(60, 80, 100),
		MainBG = Color3.fromRGB(45, 65, 85),
		TitleBarLine = Color3.fromRGB(110, 140, 170),
		TabUnselected = Color3.fromRGB(90, 120, 150),
		SectionBorder = Color3.fromRGB(75, 100, 125),
	},
}

local currentTheme = "Default"
local rippleEffectsOn = false
local flags = {}
local activeWindow = nil
local cleanupConnections = {}
local themeObjects = {}
local flagSubscribers = {}
local currentWindow = nil
local currentBlurObject = nil

local Creator = {}

Creator.Registry = {}
Creator.Signals = {}

function Creator.GetThemeProperty(Property)
	return THEMES[currentTheme][Property] or THEMES.Default[Property]
end

function Creator.GetCurrentTheme()
	local theme = THEMES[currentTheme] or THEMES.Default
	if theme ~= THEMES.Default and (not theme.ToggleKnobColor) then
		return mergeTheme(theme, THEMES.Default)
	end
	return theme
end

function Creator.AddSignal(Signal, Function)
	local Connection = Signal:Connect(Function)
	table.insert(Creator.Signals, Connection)
	return Connection
end

function Creator.New(ClassName, Properties, Children)
	local Object = Instance.new(ClassName)

	for Name, Value in next, Properties or {} do
		Object[Name] = Value
	end

	for _, Child in next, Children or {} do
		Child.Parent = Object
	end

	return Object
end

local function getCurrentTheme()
	return Creator.GetCurrentTheme()
end

local function createTween(Object, Properties, Duration, EasingStyle, EasingDirection)
	Duration = Duration or 0.2
	EasingStyle = EasingStyle or Enum.EasingStyle.Exponential
	EasingDirection = EasingDirection or Enum.EasingDirection.Out

	local TweenInfo = TweenInfo.new(Duration, EasingStyle, EasingDirection)
	return TweenService:Create(Object, TweenInfo, Properties)
end

local function tweenProperty(Object, Property, Value, Duration, EasingStyle, EasingDirection)
	local Tween = createTween(Object, {[Property] = Value}, Duration, EasingStyle, EasingDirection)
	Tween:Play()
	return Tween
end

local function createCorner(Parent, Radius)
	local Corner = Creator.New("UICorner", {
		Parent = Parent,
		CornerRadius = UDim.new(0, Radius or 4),
	})
	return Corner
end

local function createStroke(Parent, Color, Transparency, Thickness)
	local Stroke = Creator.New("UIStroke", {
		Parent = Parent,
		Color = Color or Creator.GetThemeProperty("ElementBorder"),
		Transparency = Transparency or 0.5,
		Thickness = Thickness or 1,
	})
	return Stroke
end

local function createFrame(Parent, Size, Position, BackgroundColor, Transparency, Name)
	local Frame = Creator.New("Frame", {
		Parent = Parent,
		Size = Size or UDim2.new(1, 0, 1, 0),
		Position = Position or UDim2.new(0, 0, 0, 0),
		BackgroundColor3 = BackgroundColor or Creator.GetThemeProperty("ElementColor"),
		BackgroundTransparency = Transparency or 0.87,
		BorderSizePixel = 0,
		Name = Name or "Frame",
	})
	return Frame
end

local function createTextLabel(Parent, Text, Size, Position, Font, TextSize, TextColor, TextXAlignment, TextYAlignment)
	local Label = Creator.New("TextLabel", {
		Parent = Parent,
		Text = Text or "",
		Size = Size or UDim2.new(1, 0, 0, 20),
		Position = Position or UDim2.new(0, 0, 0, 0),
		Font = Font or Enum.Font.Gotham,
		TextSize = TextSize or 14,
		TextColor3 = TextColor or Creator.GetThemeProperty("TextColor"),
		TextXAlignment = TextXAlignment or Enum.TextXAlignment.Left,
		TextYAlignment = TextYAlignment or Enum.TextYAlignment.Center,
		BackgroundTransparency = 1,
	})
	return Label
end

local function attachRipple(button)
	if not rippleEffectsOn then return end
	button.ClipsDescendants = true
	button.MouseButton1Down:Connect(function()
		local absPos = button.AbsolutePosition
		local absSize = button.AbsoluteSize
		local lock = button:GetAttribute("RippleLock") or 0
		if lock == 0 then
			button:SetAttribute("RippleOldAuto", button.AutomaticSize.Name)
			button:SetAttribute("RippleOldSizeXScale", button.Size.X.Scale)
			button:SetAttribute("RippleOldSizeXOffset", button.Size.X.Offset)
			button:SetAttribute("RippleOldSizeYScale", button.Size.Y.Scale)
			button:SetAttribute("RippleOldSizeYOffset", button.Size.Y.Offset)
			if button.AutomaticSize ~= Enum.AutomaticSize.None then
				button.AutomaticSize = Enum.AutomaticSize.None
				button.Size = UDim2.new(button.Size.X.Scale, button.Size.X.Offset, 0, absSize.Y)
			end
		end
		button:SetAttribute("RippleLock", lock + 1)
		local mousePos = UserInputService:GetMouseLocation()
		local localPos = Vector2.new(0, 0)
		if mousePos then
			local insetY = 0
			pcall(function()
				local inset = game:GetService("GuiService"):GetGuiInset()
				insetY = inset.Y or 0
			end)
			localPos = Vector2.new(mousePos.X - absPos.X, (mousePos.Y - insetY) - absPos.Y)
		end
		if (localPos.X < 0 or localPos.Y < 0 or localPos.X > absSize.X or localPos.Y > absSize.Y) then
			localPos = Vector2.new(absSize.X * 0.5, absSize.Y * 0.5)
		end
		local ripple = Instance.new("Frame")
		ripple.BackgroundColor3 = (getCurrentTheme().Accent) or Color3.fromRGB(255, 255, 255)
		ripple.BackgroundTransparency = 0.6
		ripple.Size = UDim2.fromOffset(0, 0)
		ripple.Position = UDim2.fromOffset(localPos.X, localPos.Y)
		ripple.AnchorPoint = Vector2.new(0.5, 0.5)
		ripple.BorderSizePixel = 0
		ripple.ZIndex = (button.ZIndex or 1) + 1
		ripple.Parent = button
		local corner = Instance.new("UICorner")
		corner.CornerRadius = UDim.new(1, 0)
		corner.Parent = ripple
		local maxDim = math.max(absSize.X, absSize.Y)
		TweenService:Create(ripple, TweenInfo.new(0.75, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
			Size = UDim2.fromOffset(maxDim, maxDim),
			BackgroundTransparency = 1
		}):Play()
		task.delay(0.8, function()
			if ripple then ripple:Destroy() end
			local cur = button:GetAttribute("RippleLock") or 0
			cur = math.max(0, cur - 1)
			button:SetAttribute("RippleLock", cur)
			if cur == 0 then
				local oldAutoName = button:GetAttribute("RippleOldAuto")
				if oldAutoName ~= nil then
					local oldXScale = button:GetAttribute("RippleOldSizeXScale") or 0
					local oldXOffset = button:GetAttribute("RippleOldSizeXOffset") or 0
					local oldYScale = button:GetAttribute("RippleOldSizeYScale") or 0
					local oldYOffset = button:GetAttribute("RippleOldSizeYOffset") or 0
					button.AutomaticSize = Enum.AutomaticSize[oldAutoName]
					button.Size = UDim2.new(oldXScale, oldXOffset, oldYScale, oldYOffset)
					button:SetAttribute("RippleOldAuto", nil)
					button:SetAttribute("RippleOldSizeXScale", nil)
					button:SetAttribute("RippleOldSizeXOffset", nil)
					button:SetAttribute("RippleOldSizeYScale", nil)
					button:SetAttribute("RippleOldSizeYOffset", nil)
				end
			end
		end)
	end)
end

local function createTextButton(Parent, Text, Size, Position, Font, TextSize, TextColor, BackgroundColor, Transparency)
	local Button = Creator.New("TextButton", {
		Parent = Parent,
		Text = Text or "",
		Size = Size or UDim2.new(1, 0, 0, 30),
		Position = Position or UDim2.new(0, 0, 0, 0),
		Font = Font or Enum.Font.Gotham,
		TextSize = TextSize or 14,
		TextColor3 = TextColor or Creator.GetThemeProperty("TextColor"),
		BackgroundColor3 = BackgroundColor or Creator.GetThemeProperty("ElementColor"),
		BackgroundTransparency = Transparency or 0.87,
		BorderSizePixel = 0,
		AutoButtonColor = false,
		ClipsDescendants = true,
	})
	pcall(function()
		attachRipple(Button)
	end)
	return Button
end

local function createTextBox(Parent, Text, Size, Position, Font, TextSize, TextColor, BackgroundColor, Transparency)
	local TextBox = Creator.New("TextBox", {
		Parent = Parent,
		Text = Text or "",
		Size = Size or UDim2.new(1, 0, 0, 20),
		Position = Position or UDim2.new(0, 0, 0, 0),
		Font = Font or Enum.Font.Gotham,
		TextSize = TextSize or 14,
		TextColor3 = TextColor or Creator.GetThemeProperty("TextColor"),
		BackgroundColor3 = BackgroundColor or Creator.GetThemeProperty("ElementColor"),
		BackgroundTransparency = Transparency or 0.87,
		BorderSizePixel = 0,
		ClearTextOnFocus = false,
	})
	return TextBox
end

local function createScrollingFrame(Parent, Size, Position, BackgroundColor, Transparency)
	local ScrollFrame = Creator.New("ScrollingFrame", {
		Parent = Parent,
		Size = Size or UDim2.new(1, 0, 1, 0),
		Position = Position or UDim2.new(0, 0, 0, 0),
		BackgroundColor3 = BackgroundColor or Creator.GetThemeProperty("ElementColor"),
		BackgroundTransparency = Transparency or 1,
		BorderSizePixel = 0,
		ScrollBarThickness = 3,
		CanvasSize = UDim2.fromScale(0, 0),
		AutomaticCanvasSize = Enum.AutomaticSize.Y,
	})
	return ScrollFrame
end

local function createImageLabel(Parent, Image, Size, Position, ImageColor, Transparency)
	local ImageLabel = Creator.New("ImageLabel", {
		Parent = Parent,
		Image = Image or "",
		Size = Size or UDim2.new(0, 20, 0, 20),
		Position = Position or UDim2.new(0, 0, 0, 0),
		ImageColor3 = ImageColor or Color3.new(1, 1, 1),
		ImageTransparency = Transparency or 0,
		BackgroundTransparency = 1,
	})
	return ImageLabel
end

local function createListLayout(Parent, Padding, SortOrder, VerticalAlignment, HorizontalAlignment)
	local ListLayout = Creator.New("UIListLayout", {
		Parent = Parent,
		Padding = UDim.new(0, Padding or 5),
		SortOrder = SortOrder or Enum.SortOrder.LayoutOrder,
		VerticalAlignment = VerticalAlignment or Enum.VerticalAlignment.Top,
		HorizontalAlignment = HorizontalAlignment or Enum.HorizontalAlignment.Left,
	})
	return ListLayout
end

local function createPadding(Parent, Top, Bottom, Left, Right)
	local Padding = Creator.New("UIPadding", {
		Parent = Parent,
		PaddingTop = UDim.new(0, Top or 0),
		PaddingBottom = UDim.new(0, Bottom or 0),
		PaddingLeft = UDim.new(0, Left or 0),
		PaddingRight = UDim.new(0, Right or 0),
	})
	return Padding
end

local function createSizeConstraint(Parent, MinSize, MaxSize)
	local Constraint = Creator.New("UISizeConstraint", {
		Parent = Parent,
		MinSize = MinSize,
		MaxSize = MaxSize,
	})
	return Constraint
end

local function applyHoverEffects(Element, HoverTransparency, NormalTransparency, PressTransparency)
	if Element.Name == "Frame" or Element:IsA("Frame") then
		return
	end

	HoverTransparency = HoverTransparency or 0.8
	NormalTransparency = NormalTransparency or 0.87
	PressTransparency = PressTransparency or 0.94

	Element.MouseEnter:Connect(function()
		tweenProperty(Element, "BackgroundTransparency", HoverTransparency, 0.15)
	end)

	Element.MouseLeave:Connect(function()
		tweenProperty(Element, "BackgroundTransparency", NormalTransparency, 0.15)
	end)

	if Element.MouseButton1Down and Element.MouseButton1Up and not Element:IsA("Frame") then
		Element.MouseButton1Down:Connect(function()
			tweenProperty(Element, "BackgroundTransparency", PressTransparency, 0.1)
		end)

		Element.MouseButton1Up:Connect(function()
			tweenProperty(Element, "BackgroundTransparency", HoverTransparency, 0.1)
		end)
	end
end

local function registerThemeObject(Object, Property, ThemeProperty)
	table.insert(themeObjects, {
		Object = Object,
		Property = Property,
		ThemeProperty = ThemeProperty,
	})
end

local function applyThemeToObject(Object, Property, ThemeProperty)
	local CurrentThemeData = Creator.GetCurrentTheme()
	local Value = CurrentThemeData[ThemeProperty]

	if Property == "BackgroundColor3" then
		Object.BackgroundColor3 = Value
	elseif Property == "TextColor3" then
		Object.TextColor3 = Value
	elseif Property == "Color" then
		Object.Color = Value
	elseif Property == "ImageColor3" then
		Object.ImageColor3 = Value
	end
end

local function createStyledEl(ElementType, Parent, Properties)
	local Element

	if ElementType == "Frame" then
		Element = createFrame(Parent, Properties.size, Properties.position, Properties.backgroundColor, Properties.transparency, Properties.name)
	elseif ElementType == "TextLabel" then
		Element = createTextLabel(Parent, Properties.text, Properties.size, Properties.position, Properties.font, Properties.textSize, Properties.textColor, Properties.textXAlignment, Properties.textYAlignment)
	elseif ElementType == "TextButton" then
		Element = createTextButton(Parent, Properties.text, Properties.size, Properties.position, Properties.font, Properties.textSize, Properties.textColor, Properties.backgroundColor, Properties.transparency)
	elseif ElementType == "TextBox" then
		Element = createTextBox(Parent, Properties.text, Properties.size, Properties.position, Properties.font, Properties.textSize, Properties.textColor, Properties.backgroundColor, Properties.transparency)
	elseif ElementType == "ScrollingFrame" then
		Element = createScrollingFrame(Parent, Properties.size, Properties.position, Properties.backgroundColor, Properties.transparency)
	elseif ElementType == "ImageLabel" then
		Element = createImageLabel(Parent, Properties.image, Properties.size, Properties.position, Properties.imageColor, Properties.transparency)
	end

	if Properties.cornerRadius then
		createCorner(Element, Properties.cornerRadius)
	end

	if Properties.stroke then
		createStroke(Element, Properties.stroke.color, Properties.stroke.transparency, Properties.stroke.thickness)
	end

	if Properties.theme then
		registerThemeObject(Element, Properties.theme.property, Properties.theme.themeProperty)
	end

	if Properties.hoverEffects then
		applyHoverEffects(Element, Properties.hoverEffects.hover, Properties.hoverEffects.normal, Properties.hoverEffects.press)
	end

	if ElementType == "TextButton" and not Properties.noRipple then
		pcall(function()
			attachRipple(Element)
		end)
	end

	return Element
end

local function cleanupExistingUI()
	if activeWindow then
		for _, Connection in pairs(cleanupConnections) do
			if Connection and Connection.Connected then
				Connection:Disconnect()
			end
		end
		cleanupConnections = {}

		for _, Connection in ipairs(Creator.Signals) do
			if Connection and Connection.Connected then
				Connection:Disconnect()
			end
		end
		Creator.Signals = {}

		if currentBlurObject then
			currentBlurObject:Destroy()
			currentBlurObject = nil
		end

		if activeWindow.ScreenGui and activeWindow.ScreenGui.Parent then
			activeWindow.ScreenGui:Destroy()
		end

		activeWindow = nil
		currentWindow = nil
		flags = {}
		flagSubscribers = {}
		themeObjects = {}

		task.wait(0.1)
	end

	for _, Gui in pairs(CoreGui:GetChildren()) do
		if Gui.Name == "VynixusUI" or Gui.Name == "VynixusUILoading" then
			Gui:Destroy()
		end
	end
end

local function SetTheme(ThemeNameOrCustomTheme)
	local themeToUse

	if type(ThemeNameOrCustomTheme) == "string" then
		if not THEMES[ThemeNameOrCustomTheme] then
			return false
		end
		currentTheme = ThemeNameOrCustomTheme
		themeToUse = THEMES[ThemeNameOrCustomTheme]
	elseif type(ThemeNameOrCustomTheme) == "table" then
		themeToUse = mergeTheme(ThemeNameOrCustomTheme, nil)
		currentTheme = "Custom"
		if not THEMES["Custom"] then
			THEMES["Custom"] = {}
		end
		THEMES["Custom"] = themeToUse
	else
		return false
	end

	for _, ThemeObj in pairs(themeObjects) do
		if ThemeObj.Object and ThemeObj.Object.Parent then
			applyThemeToObject(ThemeObj.Object, ThemeObj.Property, ThemeObj.ThemeProperty)
		end
	end

	return true
end

local BlurredGui = nil
local acrylicEnabled = false

Vynixus.SetTheme = SetTheme

local function loadFromMarketplace(AssetId)
	local Success, ModuleCode = pcall(function()
		local Url = "https://assetdelivery.roblox.com/v1/asset?id=" .. tostring(AssetId)
		local Response = game:HttpGet(Url, true)
		if Response and Response ~= "" then
			return loadstring(Response)()
		end
	end)

	if Success and ModuleCode then
		return ModuleCode
	end

	Success, ModuleCode = pcall(function()
		local Url = "https://www.roblox.com/asset/?id=" .. tostring(AssetId)
		local Response = game:HttpGet(Url, true)
		if Response and Response ~= "" then
			return loadstring(Response)()
		end
	end)

	return Success and ModuleCode or nil
end

local function SetAcrylic(Enabled)
	acrylicEnabled = Enabled

	if Enabled and not BlurredGui then
		BlurredGui = MODULES.Acrylic()
		if not (BlurredGui and type(BlurredGui) == "table" and BlurredGui.new) then
			warn("Failed to apply acrylic: Could not load Acrylic module.")
			acrylicEnabled = false
			return
		end
	end

	if currentWindow and currentWindow.ScreenGui then
		local MainFrame = currentWindow.ScreenGui:FindFirstChild("MainFrame")
		if MainFrame then
			if Enabled then
				MainFrame.BackgroundTransparency = 0.1
				if BlurredGui and not currentBlurObject then
					currentBlurObject = BlurredGui.new(MainFrame, "Rectangle")
					currentBlurObject:SetIntensity(0.45)
				end
			else
				MainFrame.BackgroundTransparency = 0
				if currentBlurObject then
					currentBlurObject:Destroy()
					currentBlurObject = nil
				end
			end
		end
	end
end

Vynixus.SetAcrylic = SetAcrylic
Vynixus.mergeTheme = mergeTheme

local function notifyFlagChanged(name, value)
	local subs = flagSubscribers[name]
	if subs then
		for i = #subs, 1, -1 do
			local fn = subs[i]
			if fn then fn(value) end
		end
	end
end

local FlagsAPI = {}

function FlagsAPI.Get(name)
	return flags[name] and flags[name].value or nil
end

function FlagsAPI.Set(name, value)
	local entry = flags[name]
	if entry and entry.SetValue then
		entry:SetValue(value)
		return true
	end
	return false
end

function FlagsAPI.OnChange(name, fn)
	flagSubscribers[name] = flagSubscribers[name] or {}
	table.insert(flagSubscribers[name], fn)
	local idx = #flagSubscribers[name]
	return {
		Disconnect = function()
			if flagSubscribers[name] and flagSubscribers[name][idx] then
				flagSubscribers[name][idx] = nil
			end
		end
	}
end

function FlagsAPI.Export()
	local out = {}
	for k, v in pairs(flags) do
		out[k] = v.value
	end
	return out
end

function FlagsAPI.Import(tbl)
	for k, v in pairs(tbl or {}) do
		FlagsAPI.Set(k, v)
	end
end

Vynixus.Flags = FlagsAPI
local Window = nil
Vynixus.Destroy = function()
	cleanupExistingUI()
	if Window then
		Window.OnClose()
	end
end

local function CreateWindow(Config)
	if not Config or type(Config) ~= "table" then
		return nil
	end

	cleanupExistingUI()

	Window = {}
	Window.tabs = {}
	Window.containers = {}
	Window.currentTab = nil
	Window.tabCount = 0
	Window.selectedTab = 0
	Window.searchEnabled = Config.SearchEnabled or false
	Window.searchElements = {}
	Window.Acrylic = Config.Acrylic or false
	Window.OnClose = Config.OnClose or function() end
	rippleEffectsOn = Config.rippleEffectsOn or false

	if Config.Theme then
		if type(Config.Theme) == "string" then
			Window.Theme = Config.Theme
		elseif type(Config.Theme) == "table" then
			Window.Theme = "Custom"
			THEMES["Custom"] = mergeTheme(Config.Theme, nil)
		else
			Window.Theme = "Default"
		end
	else
		Window.Theme = "Default"
	end

	if Window.Theme then
		SetTheme(Window.Theme == "Custom" and THEMES["Custom"] or Window.Theme)
	end

	local ScreenGui = Creator.New("ScreenGui", {
		Parent = CoreGui,
		Name = "VynixusUI",
		ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
		ResetOnSpawn = false,
	})

	Window.ScreenGui = ScreenGui

	local CurrentThemeData = Creator.GetCurrentTheme()
	local WindowSize = Config.Size or UDim2.fromOffset(580, 460)

	local MainFrame = createStyledEl("Frame", ScreenGui, {
		size = WindowSize,
		position = UDim2.new(0.5, -(WindowSize.X.Offset/2), 0.5, -(WindowSize.Y.Offset/2)),
		backgroundColor = CurrentThemeData.MainBG,
		transparency = Window.Acrylic and 0.24 or 0,
		cornerRadius = 6,
		stroke = {
			color = CurrentThemeData.ElementBorder,
			transparency = CurrentThemeData.MainBorderTransparency or 0.8,
			thickness = 1
		},
		theme = {
			property = "BackgroundColor3",
			themeProperty = "MainBG"
		}
	})
	MainFrame.Name = "MainFrame"
	MainFrame.Active = true
	MainFrame.Visible = false

	local TabSelectedLineMover = createStyledEl("Frame", MainFrame, {
		size = UDim2.new(0, 4, 0, 21),
		position = UDim2.new(0.017, 0, 0.103, 3),
		backgroundColor = CurrentThemeData.Accent,
		backgroundTransparency = 1,
		transparency = CurrentThemeData.TabSelectedLineTransparency or 0.24,
		cornerRadius = 12,
		name = "TabLine",
		theme = {
			property = "BackgroundColor3",
			themeProperty = "Accent"
		}
	})

	local TitleBarFrame = createStyledEl("Frame", MainFrame, {
		size = UDim2.new(1, 0, 0, 42),
		transparency = 1
	})

	local Dragging, DragInput, MousePos, StartPos = false, nil, nil, nil

	local function HandleDrag(Input)
		if Input.UserInputType == Enum.UserInputType.MouseButton1 then
			Dragging = true
			MousePos = Input.Position
			StartPos = MainFrame.Position

			Input.Changed:Connect(function()
				if Input.UserInputState == Enum.UserInputState.End then
					Dragging = false
				end
			end)
		end
	end

	local function HandleDragMove(Input)
		if Input.UserInputType == Enum.UserInputType.MouseMovement then
			DragInput = Input
		end
	end

	TitleBarFrame.InputBegan:Connect(HandleDrag)
	TitleBarFrame.InputChanged:Connect(HandleDragMove)

	local DragConnection = Creator.AddSignal(UserInputService.InputChanged, function(Input)
		if Input == DragInput and Dragging then
			local Delta = Input.Position - MousePos
			local TargetPos = UDim2.new(StartPos.X.Scale, StartPos.X.Offset + Delta.X, StartPos.Y.Scale, StartPos.Y.Offset + Delta.Y)
			tweenProperty(MainFrame, "Position", TargetPos, 0.1, Enum.EasingStyle.Quad)
		end
	end)

	local ActiveDropdownPopup = nil
	local ActiveDropdownAnchor = nil

	local function CreateDropdownPopup(AnchorButton, OptionTexts, SelectedPredicate, OnSelect, IsMulti)
		local ThemeNow = Creator.GetCurrentTheme()
		local AnchorAbs = AnchorButton.AbsolutePosition
		local MainAbs = MainFrame.AbsolutePosition
		local AnchorSize = AnchorButton.AbsoluteSize
		local RelPos = Vector2.new(AnchorAbs.X - MainAbs.X, AnchorAbs.Y - MainAbs.Y + AnchorSize.Y)

		if ActiveDropdownPopup and ActiveDropdownPopup.Parent then
			local SameAnchor = (ActiveDropdownAnchor == AnchorButton)
			TweenService:Create(ActiveDropdownPopup, TweenInfo.new(0.18, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
				Size = UDim2.fromOffset(ActiveDropdownPopup.Size.X.Offset, 0),
				BackgroundTransparency = 1
			}):Play()
			task.delay(0.18, function()
				if ActiveDropdownPopup and ActiveDropdownPopup.Parent then
					ActiveDropdownPopup:Destroy()
				end
			end)
			ActiveDropdownPopup = nil
			ActiveDropdownAnchor = nil
			if SameAnchor then
				return nil
			end
		end

		local Popup = Creator.New("Frame", {
			Parent = MainFrame,
			BackgroundColor3 = ThemeNow.SectionBG,
			BackgroundTransparency = Window.Acrylic and 0.24 or 0.02,
			BorderSizePixel = 0,
			ClipsDescendants = true,
			Position = UDim2.fromOffset(RelPos.X, RelPos.Y),
			Size = UDim2.fromOffset(AnchorSize.X, 0),
			ZIndex = 60,
		})

		registerThemeObject(Popup, "BackgroundColor3", "SectionBG")
		createCorner(Popup, 7)

		ActiveDropdownPopup = Popup
		ActiveDropdownAnchor = AnchorButton

		local List = Creator.New("ScrollingFrame", {
			Parent = Popup,
			BackgroundColor3 = ThemeNow.SectionBG,
			BackgroundTransparency = 1,
			BorderSizePixel = 0,
			Position = UDim2.new(0, 3, 0, 5),
			Size = UDim2.new(1.01007271, -8, 0.980743229, -8),
			CanvasSize = UDim2.fromScale(0, 0),
			ScrollBarThickness = 0,
			ScrollBarImageColor3 = ThemeNow.Accent,
			ScrollBarImageTransparency = 1,
		})

		createListLayout(List, 3, Enum.SortOrder.LayoutOrder, Enum.VerticalAlignment.Top, Enum.HorizontalAlignment.Center)
		createPadding(List, 4, 4, 2, 0)

		local TotalH = 0
		for _, Text in ipairs(OptionTexts) do
			local IsSelected = SelectedPredicate(Text)
			local Item = Creator.New("TextButton", {
				Parent = List,
				BackgroundColor3 = IsSelected and ThemeNow.ElementColor or ThemeNow.SectionBorder,
				BackgroundTransparency = 0.7,
				BorderSizePixel = 0,
				ClipsDescendants = true,
				Size = UDim2.new(1.00848591, -4, 0, 28),
				ZIndex = 61,
				AutoButtonColor = false,
				Font = Enum.Font.Gotham,
				Text = Text,
				TextColor3 = ThemeNow.TextColor,
				TextSize = 12,
				TextTransparency = 1,
			})

			createCorner(Item, 6)

			local AccentBar = Creator.New("Frame", {
				Parent = Item,
				BackgroundColor3 = ThemeNow.Accent,
				BackgroundTransparency = IsSelected and 0.24 or 0.4,
				BorderSizePixel = 0,
				Position = IsSelected and UDim2.new(0, 0, 0, 5) or UDim2.new(0, 2, 0, 3),
				Size = IsSelected and UDim2.new(0, 4, 0.99999994, -10) or UDim2.new(0, 3, 1, -6),
				Visible = IsSelected,
				ZIndex = 62,
			})

			registerThemeObject(AccentBar, "BackgroundColor3", "Accent")
			createCorner(AccentBar, 12)

			local ItemLabel = Creator.New("TextLabel", {
				Parent = Item,
				BackgroundTransparency = 1,
				Position = UDim2.new(0, 8, 0, 0),
				Size = UDim2.new(1, -8, 1, 0),
				Font = Enum.Font.Montserrat,
				Text = Text,
				TextColor3 = ThemeNow.TextColor,
				TextSize = 13,
				TextXAlignment = Enum.TextXAlignment.Left,
				TextYAlignment = Enum.TextYAlignment.Center,
				ZIndex = 62,
			})

			registerThemeObject(ItemLabel, "TextColor3", "TextColor")
			applyHoverEffects(Item, 0.35, 0.7, 0.02)

			List.CanvasSize = UDim2.fromScale(0, List.CanvasSize.Y.Scale + 0.2)

			Item.MouseButton1Click:Connect(function()
				local KeepOpen = IsMulti and OnSelect(Text) or (OnSelect(Text) == true)
				if not IsMulti then
					TweenService:Create(Popup, TweenInfo.new(0.22, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
						Size = UDim2.fromOffset(Popup.Size.X.Offset, 0),
						BackgroundTransparency = 1
					}):Play()
					task.delay(0.22, function()
						if Popup and Popup.Parent then
							Popup:Destroy()
						end
						if ActiveDropdownPopup == Popup then
							ActiveDropdownPopup = nil
							ActiveDropdownAnchor = nil
						end
					end)
				else
					local NowSelected = SelectedPredicate(Text)
					if NowSelected then
						AccentBar.Visible = true
						AccentBar.Size = UDim2.new(0, 0, 0, 0)
						AccentBar.Position = UDim2.new(0, 0, 0.5, 0)
						AccentBar.BackgroundTransparency = 1
						TweenService:Create(AccentBar, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
							Size = UDim2.new(0, 4, 0.99999994, -10),
							Position = UDim2.new(0, 0, 0, 5),
							BackgroundTransparency = 0.24
						}):Play()
					else
						TweenService:Create(AccentBar, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
							Size = UDim2.new(0, 0, 0, 0),
							Position = UDim2.new(0, 0, 0.5, 0),
							BackgroundTransparency = 1
						}):Play()
						task.delay(0.15, function()
							if AccentBar then
								AccentBar.Visible = false
							end
						end)
					end
					local ThemeNow2 = Creator.GetCurrentTheme()
					Item.BackgroundColor3 = NowSelected and ThemeNow2.ElementColor or ThemeNow2.SectionBorder
					ItemLabel.Position = UDim2.new(0, 8, 0, 0)
					ItemLabel.Size = UDim2.new(1, -8, 1, 0)
				end
			end)

			TotalH += 30
		end

		local TargetH = math.min(TotalH + 8, 200)
		local PopupWidth = AnchorSize.X
		Popup.Size = UDim2.fromOffset(PopupWidth, 0)
		TweenService:Create(Popup, TweenInfo.new(0.26, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {
			Size = UDim2.fromOffset(PopupWidth, TargetH)
		}):Play()

		return Popup
	end

	local TitleHolder = createStyledEl("Frame", TitleBarFrame, {
		size = UDim2.new(1, -16, 1, 0),
		position = UDim2.fromOffset(16, 0),
		transparency = 1
	})

	local TitleLabel = createStyledEl("TextLabel", TitleHolder, {
		text = Config.Title or "VynixusUI",
		size = UDim2.new(1, -100, 1, 0),
		font = Enum.Font.Gotham,
		textSize = 15,
		textColor = CurrentThemeData.TextColor,
		textXAlignment = Enum.TextXAlignment.Left,
		textYAlignment = Enum.TextYAlignment.Center,
		theme = {
			property = "TextColor3",
			themeProperty = "TextColor"
		}
	})

	local ButtonsFrame = Creator.New("Frame", {
		Parent = TitleHolder,
		BackgroundTransparency = 1,
		AnchorPoint = Vector2.new(1, 0.5),
		Position = UDim2.new(1, -10, 0.5, 0),
		Size = UDim2.fromOffset(0, 34),
		AutomaticSize = Enum.AutomaticSize.X
	})

	Creator.New("UIListLayout", {
		Parent = ButtonsFrame,
		FillDirection = Enum.FillDirection.Horizontal,
		Padding = UDim.new(0, 6),
		VerticalAlignment = Enum.VerticalAlignment.Center,
		SortOrder = Enum.SortOrder.LayoutOrder
	})

	local MinimizeButton = Creator.New("ImageButton", {
		Parent = ButtonsFrame,
		BackgroundColor3 = Color3.new(1, 1, 1),
		BackgroundTransparency = 1,
		BorderSizePixel = 0,
		Size = UDim2.fromOffset(34, 34),
		LayoutOrder = 1,
		Image = "rbxassetid://126889368575998",
		ImageColor3 = CurrentThemeData.TextColor,
		ImageTransparency = 1,
		ScaleType = Enum.ScaleType.Tile
	})

	registerThemeObject(MinimizeButton, "ImageColor3", "TextColor")

	local MinimizeLine = Creator.New("Frame", {
		Parent = MinimizeButton,
		BackgroundColor3 = CurrentThemeData.TextColor,
		BorderSizePixel = 0,
		Position = UDim2.new(0.379506648, 0, 0.465116292, 0),
		Size = UDim2.new(0, 15, 0, 1)
	})

	registerThemeObject(MinimizeLine, "BackgroundColor3", "TextColor")

	local IsFullscreen = false
	local OriginalSize = WindowSize
	local OriginalPosition = UDim2.new(0.5, -(WindowSize.X.Offset/2), 0.5, -(WindowSize.Y.Offset/2))

	local FullscreenButton = Creator.New("ImageButton", {
		Parent = ButtonsFrame,
		BackgroundColor3 = Color3.new(1, 1, 1),
		BackgroundTransparency = 1,
		BorderSizePixel = 0,
		Size = UDim2.fromOffset(34, 34),
		LayoutOrder = 2,
		ImageTransparency = 0.33,
		ScaleType = Enum.ScaleType.Fit
	})

	local FullscreenPadding = Creator.New("UIPadding", {
		Parent = FullscreenButton,
		PaddingTop = UDim.new(0, 3)
	})

	local FullscreenIcon = Creator.New("Frame", {
		Parent = FullscreenButton,
		BackgroundColor3 = CurrentThemeData.TextColor,
		BackgroundTransparency = 1,
		BorderSizePixel = 0,
		Position = UDim2.new(0.318979263, 0, 0.323529422, 0),
		Size = UDim2.new(0, 12, 0, 12)
	})

	registerThemeObject(FullscreenIcon, "BackgroundColor3", "TextColor")

	createStroke(FullscreenIcon, Color3.fromRGB(230, 230, 230), 0, 1)

	local FullscreenCorner = Creator.New("UICorner", {
		Parent = FullscreenIcon,
		CornerRadius = UDim.new(0, 4)
	})

	local CloseButton = Creator.New("ImageButton", {
		Parent = ButtonsFrame,
		BackgroundColor3 = Color3.new(1, 1, 1),
		BackgroundTransparency = 1,
		BorderSizePixel = 0,
		Size = UDim2.fromOffset(34, 34),
		LayoutOrder = 3,
		Image = "rbxassetid://98178946837077",
		ImageTransparency = 1,
		ScaleType = Enum.ScaleType.Fit
	})

	local ClosePadding = Creator.New("UIPadding", {
		Parent = CloseButton,
		PaddingTop = UDim.new(0, 1)
	})

	local CloseIcon = Creator.New("ImageLabel", {
		Parent = CloseButton,
		AnchorPoint = Vector2.new(0.5, 0.5),
		BackgroundColor3 = Color3.new(1, 1, 1),
		BackgroundTransparency = 1,
		BorderSizePixel = 0,
		Position = UDim2.new(0.44683677, 0, 0.495644689, 0),
		Size = UDim2.new(0, 24, 0, 24),
		Image = "rbxassetid://98178946837077"
	})

	MinimizeButton.MouseButton1Click:Connect(function()
		MainFrame.Visible = false
	end)

	FullscreenButton.MouseButton1Click:Connect(function()
		IsFullscreen = not IsFullscreen
		if IsFullscreen then
			local ViewportSize = workspace.CurrentCamera.ViewportSize
			OriginalSize = MainFrame.Size
			OriginalPosition = MainFrame.Position
			tweenProperty(MainFrame, "Size", UDim2.fromOffset(ViewportSize.X, ViewportSize.Y), 0.3, Enum.EasingStyle.Quad)
			tweenProperty(MainFrame, "Position", UDim2.new(0, 0, 0, 0), 0.3, Enum.EasingStyle.Quad)
		else
			tweenProperty(MainFrame, "Size", OriginalSize, 0.3, Enum.EasingStyle.Quad)
			tweenProperty(MainFrame, "Position", OriginalPosition, 0.3, Enum.EasingStyle.Quad)
		end
	end)

CloseButton.MouseButton1Click:Connect(function()
	if Vynixus.Destroy then
		Vynixus.Destroy()
	else
		if ScreenGui and ScreenGui.Parent then
			ScreenGui:Destroy()
		end
	end
end)

	local TitleBarLine = createStyledEl("Frame", TitleBarFrame, {
		size = UDim2.new(1, 0, 0, 1),
		position = UDim2.new(0, 0, 1, 0),
		backgroundColor = CurrentThemeData.TitleBarLine,
		transparency = CurrentThemeData.TitleBarLineTransparency or 0.5,
		theme = {
			property = "BackgroundColor3",
			themeProperty = "TitleBarLine"
		}
	})

	local TabWidth = Config.TabWidth or 160

	local TabContainer = createStyledEl("Frame", MainFrame, {
		size = UDim2.new(0, TabWidth, 1, -66),
		position = UDim2.fromOffset(12, 54),
		transparency = 1
	})
	TabContainer.ClipsDescendants = true

	local TabScroll = createStyledEl("ScrollingFrame", TabContainer, {
		size = UDim2.fromScale(1, 1),
		transparency = 1
	})
	TabScroll.ScrollBarThickness = 0
	TabScroll.ScrollBarImageTransparency = 1
	TabScroll.CanvasSize = UDim2.fromScale(0, 0)
	TabScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y

	createListLayout(TabScroll, 4, Enum.SortOrder.LayoutOrder)

	local ContainerCanvas = createStyledEl("Frame", MainFrame, {
		size = UDim2.new(1, -TabWidth - 32, 1, -66),
		position = UDim2.fromOffset(TabWidth + 26, 54),
		transparency = 1
	})

	local ContainerHolder = createStyledEl("Frame", ContainerCanvas, {
		size = UDim2.fromScale(1, 1),
		transparency = 1
	})

	Window.TabScroll = TabScroll
	Window.ContainerHolder = ContainerHolder

	function Window:ToggleVisibility()
		local IsVisible = MainFrame.Visible
		MainFrame.Visible = not IsVisible

		if not IsVisible then
			tweenProperty(MainFrame, "Size", WindowSize, 0.24)
		end
	end

	local TabButtonLines = {}
	local TabSwitchInterval = 1
	local LastTabSwitch = 0

	function Window:CreateTab(Name, Icon)
		if not Name or Name == "" then
			return nil
		end

		local Tab = {}
		Window.tabCount = Window.tabCount + 1
		local TabIndex = Window.tabCount

		local TabButton = createStyledEl("TextButton", TabScroll, {
			size = UDim2.new(1, 0, 0, 34),
			backgroundColor = Color3.fromRGB(90, 90, 90),
			transparency = 1,
			cornerRadius = 6,
			theme = {
				property = "BackgroundColor3",
				themeProperty = "TabUnselected"
			}
		})
		TabButton.LayoutOrder = TabIndex

		local TabSelectedLineGuider = createStyledEl("Frame", TabButton, {
			size = UDim2.new(0, 4, 0, 21),
			position = UDim2.new(0, 0, 0.092, 3),
			backgroundColor = CurrentThemeData.Accent,
			transparency = 1,
			cornerRadius = 12,
			name = "TabLine",
			theme = {
				property = "BackgroundColor3",
				themeProperty = "Accent"
			}
		})
		Tab.IndicatorGuider = TabSelectedLineGuider

		local TabLabel = createStyledEl("TextLabel", TabButton, {
			text = Name,
			size = UDim2.new(1, -12, 1, 0),
			position = UDim2.fromOffset(12, 0),
			font = Enum.Font.GothamMedium,
			textSize = 15,
			textColor = Color3.fromRGB(135, 135, 140),
			textXAlignment = Enum.TextXAlignment.Left
		})

		if Icon then
			local IconStr = typeof(Icon) == "string" and (string.find(Icon, "rbxassetid://") and Icon or "rbxassetid://" .. Icon) or "rbxassetid://" .. tostring(Icon)
			local TabIcon = createStyledEl("ImageLabel", TabButton, {
				image = IconStr,
				size = UDim2.fromOffset(16, 16),
				position = UDim2.fromOffset(8, 9),
				imageColor = Color3.fromRGB(135, 135, 140),
				transparency = 0.3
			})

			TabLabel.Position = UDim2.fromOffset(32, 0)
			TabLabel.Size = UDim2.new(1, -44, 1, 0)
		end

		local TabContent = createStyledEl("ScrollingFrame", ContainerHolder, {
			size = UDim2.fromScale(1, 1),
			transparency = 1
		})
		TabContent.ScrollBarThickness = 3
		TabContent.BottomImage = "rbxassetid://6889812791"
		TabContent.MidImage = "rbxassetid://6889812721"
		TabContent.TopImage = "rbxassetid://6276641225"
		TabContent.ScrollBarImageColor3 = Color3.fromRGB(255, 255, 255)
		TabContent.ScrollBarImageTransparency = 0.95
		TabContent.CanvasSize = UDim2.fromScale(0, 0)
		TabContent.AutomaticCanvasSize = Enum.AutomaticSize.Y
		TabContent.Visible = false

		createListLayout(TabContent, 5, Enum.SortOrder.LayoutOrder)
		createPadding(TabContent, 1, 1, 1, 10)

		Tab.Frame = TabButton
		Tab.Label = TabLabel
		Tab.Content = TabContent
		Tab.Selected = false

		local function SetTransparency(Value, Immediate)
			if Immediate or Tab.Selected then
				TabButton.BackgroundTransparency = Value
				return
			end
			tweenProperty(TabButton, "BackgroundTransparency", Value, 0.2, Enum.EasingStyle.Quad)
		end

		TabButton.MouseEnter:Connect(function()
			if Tab.Selected then
				SetTransparency(0.65, true)
			else
				SetTransparency(0.89)
			end
		end)

		TabButton.MouseLeave:Connect(function()
			if Tab.Selected then
				SetTransparency(0.65, true)
			else
				SetTransparency(1)
			end
		end)

		TabButton.MouseButton1Down:Connect(function()
			if Tab.Selected then
				SetTransparency(0.65)
			else
				SetTransparency(0.89)
			end
		end)

		TabButton.MouseButton1Up:Connect(function()
			if Tab.Selected then
				SetTransparency(0.65)
			else
				SetTransparency(0.89)
			end
		end)

		TabButton.MouseButton1Click:Connect(function()
			Window:SelectTab(TabIndex)
		end)

		Window.containers[TabIndex] = TabContent
		Window.tabs[TabIndex] = Tab

		if not Window.currentTab then
			Window.currentTab = Tab
			Window.selectedTab = TabIndex
			TabContent.Visible = true
			Tab.Selected = true
			TabButton.BackgroundTransparency = 0.65
			TabLabel.TextColor3 = Color3.fromRGB(245, 245, 250)
		end

		function Tab:AddSection(Title)
			if not Title or Title == "" then
				return nil
			end

			local Section = setmetatable({}, {__index = Tab})

			local SectionRoot = createStyledEl("Frame", TabContent, {
				size = UDim2.new(1, 0, 0, 22),
				transparency = 1
			})
			SectionRoot.LayoutOrder = 7

			local SectionTitle = createStyledEl("TextLabel", SectionRoot, {
				text = Title,
				size = UDim2.new(1, -16, 0, 16),
				position = UDim2.fromOffset(0, 2),
				font = Enum.Font.GothamBold,
				textSize = 16,
				textColor = CurrentThemeData.TextColor,
				textXAlignment = Enum.TextXAlignment.Left,
				textYAlignment = Enum.TextYAlignment.Center,
				theme = {
					property = "TextColor3",
					themeProperty = "TextColor"
				}
			})

			local SectionContainer = createStyledEl("Frame", SectionRoot, {
				size = UDim2.new(1, 0, 0, 0),
				position = UDim2.fromOffset(0, 22),
				backgroundColor = CurrentThemeData.SectionBG,
				transparency = CurrentThemeData.SectionBackgroundTransparency or 0.24,
				cornerRadius = 300,
				stroke = {
					color = CurrentThemeData.SectionBorder,
					transparency = CurrentThemeData.SectionBorderTransparency or 0.8
				},
				theme = {
					property = "BackgroundColor3",
					themeProperty = "SectionBG"
				}
			})

			createListLayout(SectionContainer, 5, Enum.SortOrder.LayoutOrder)
			createPadding(SectionContainer, 8, 8, 8, 8)

			SectionContainer.UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
				SectionContainer.Size = UDim2.new(1, 0, 0, SectionContainer.UIListLayout.AbsoluteContentSize.Y + 16)
				SectionRoot.Size = UDim2.new(1, 0, 0, SectionContainer.UIListLayout.AbsoluteContentSize.Y + 38)
			end)

			Section.Container = SectionContainer
			Section.Content = SectionContainer

			return Section
		end

		function Tab:AddToggle(Text, Desc, Default, Callback, Flag)
			if not Text or Text == "" then
				return nil
			end

			local Toggle = {}
			local Toggled = Default or false
			local Container = Tab.Content

			local ToggleFrame = createStyledEl("TextButton", Container, {
				size = UDim2.new(1, 0, 0, 0),
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = CurrentThemeData.ElementTransparency or 0.87,
				cornerRadius = 4,
				stroke = {
					color = CurrentThemeData.ElementBorder,
					transparency = 0.5
				},
				hoverEffects = {
					hover = CurrentThemeData.ElementTransparencyHover or 0.8,
					normal = CurrentThemeData.ElementTransparency or 0.87,
					press = CurrentThemeData.ElementTransparencyPress or 0.94
				},
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			ToggleFrame.AutomaticSize = Enum.AutomaticSize.Y
			ToggleFrame.LayoutOrder = 7

			local LabelHolder = createStyledEl("Frame", ToggleFrame, {
				size = UDim2.new(1, -64, 0, 0),
				position = UDim2.fromOffset(10, 0),
				transparency = 1
			})
			LabelHolder.AutomaticSize = Enum.AutomaticSize.Y

			createListLayout(LabelHolder, 0, Enum.SortOrder.LayoutOrder, Enum.VerticalAlignment.Center)
			createPadding(LabelHolder, 13, 13, 0, 0)

			local TitleLabel = createStyledEl("TextLabel", LabelHolder, {
				text = Text,
				size = UDim2.new(1, 0, 0, 14),
				font = Enum.Font.GothamMedium,
				textSize = 13,
				textColor = CurrentThemeData.TextColor,
				textXAlignment = Enum.TextXAlignment.Left,
				theme = {
					property = "TextColor3",
					themeProperty = "TextColor"
				}
			})

			if Desc then
				local DescLabel = createStyledEl("TextLabel", LabelHolder, {
					text = Desc,
					size = UDim2.new(1, -54, 0, 14),
					font = Enum.Font.Gotham,
					textSize = 12,
					textColor = CurrentThemeData.SubTextColor,
					textXAlignment = Enum.TextXAlignment.Left,
					theme = {
						property = "TextColor3",
						themeProperty = "SubTextColor"
					}
				})
				DescLabel.TextWrapped = true
				DescLabel.AutomaticSize = Enum.AutomaticSize.Y
			end

			local ToggleSlider = createStyledEl("Frame", ToggleFrame, {
				size = UDim2.fromOffset(36, 18),
				position = UDim2.new(1, -10, 0.5, 0),
				backgroundColor = CurrentThemeData.ToggleSliderBackgroundColor or CurrentThemeData.Accent,
				transparency = CurrentThemeData.ToggleSliderBackgroundTransparencyOff or 1,
				cornerRadius = 9,
				stroke = {
					color = CurrentThemeData.ToggleSliderStrokeColor or CurrentThemeData.ElementColor,
					transparency = CurrentThemeData.ToggleSliderStrokeTransparencyOff or 0.5
				},
				theme = {
					property = "BackgroundColor3",
					themeProperty = "Accent"
				}
			})
			ToggleSlider.AnchorPoint = Vector2.new(1, 0.5)

			local ToggleCircle = createStyledEl("ImageLabel", ToggleSlider, {
				image = "rbxassetid://12266946128",
				size = UDim2.fromOffset(14, 14),
				position = UDim2.new(0, 2, 0.5, 0),
				imageColor = CurrentThemeData.ToggleKnobColor or Color3.fromRGB(255, 255, 255),
				transparency = CurrentThemeData.ToggleKnobTransparencyOff or 0.5
			})
			ToggleCircle.AnchorPoint = Vector2.new(0, 0.5)

			if Toggled then
				ToggleSlider.BackgroundTransparency = CurrentThemeData.ToggleSliderBackgroundTransparency or 0
				ToggleSlider.UIStroke.Color = Creator.GetThemeProperty("ToggleSliderStrokeColor") or Creator.GetThemeProperty("Accent")
				ToggleSlider.UIStroke.Transparency = CurrentThemeData.ToggleSliderStrokeTransparency or 0.5
				ToggleCircle.Position = UDim2.new(0, 19, 0.5, 0)
				ToggleCircle.ImageTransparency = CurrentThemeData.ToggleKnobTransparency or 0
			end

			function Toggle:SetValue(Value)
				Toggled = Value
				local ThemeNow = Creator.GetCurrentTheme()

				tweenProperty(ToggleSlider, "BackgroundTransparency", Toggled and (ThemeNow.ToggleSliderBackgroundTransparency or 0) or (ThemeNow.ToggleSliderBackgroundTransparencyOff or 1), 0.25, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
				tweenProperty(ToggleSlider.UIStroke, "Color", Toggled and (ThemeNow.ToggleSliderStrokeColor or ThemeNow.Accent) or (ThemeNow.ToggleSliderStrokeColor or ThemeNow.ElementColor), 0.25, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
				tweenProperty(ToggleSlider.UIStroke, "Transparency", Toggled and (ThemeNow.ToggleSliderStrokeTransparency or 0.5) or (ThemeNow.ToggleSliderStrokeTransparencyOff or 0.5), 0.25, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
				tweenProperty(ToggleCircle, "Position", UDim2.new(0, Toggled and 19 or 2, 0.5, 0), 0.25, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
				tweenProperty(ToggleCircle, "ImageTransparency", Toggled and (ThemeNow.ToggleKnobTransparency or 0) or (ThemeNow.ToggleKnobTransparencyOff or 0.5), 0.25, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)

				if Flag then
					if not flags[Flag] then
						flags[Flag] = { value = Toggled }
					end
					flags[Flag].value = Toggled
					notifyFlagChanged(Flag, Toggled)
				end
				if Callback then Callback(Toggled) end
			end

			ToggleFrame.MouseButton1Click:Connect(function()
				Toggle:SetValue(not Toggled)
			end)

			if Flag then
				flags[Flag] = flags[Flag] or {}
				flags[Flag].value = Toggled
				flags[Flag].SetValue = function(self, Value)
					Toggle:SetValue(Value)
				end
			end

			return Toggle
		end

		function Tab:AddSlider(Text, Desc, Min, Max, Default, Rounding, Callback, Flag)
			if not Text or Text == "" then
				return nil
			end

			if not Min or not Max or Min >= Max then
				return nil
			end

			local Slider = {}
			local Value = Default or Min
			local Dragging = false
			local Container = Tab.Content

			if Flag then
				flags[Flag] = flags[Flag] or {}
				flags[Flag].value = Value
				flags[Flag].SetValue = function(self, NewValue)
					Value = NewValue
					Slider:SetValue(NewValue)
				end
			end

			local SliderFrame = createStyledEl("Frame", Container, {
				size = UDim2.new(1, 0, 0, 25),
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = CurrentThemeData.SliderBackgroundTransparency or 0.87,
				cornerRadius = 4,
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			SliderFrame.LayoutOrder = 7

			local LabelHolder = createStyledEl("Frame", SliderFrame, {
				size = UDim2.new(1, -230, 1, 0),
				position = UDim2.fromOffset(10, 0),
				transparency = 1
			})

			createListLayout(LabelHolder, 2, Enum.SortOrder.LayoutOrder, Enum.VerticalAlignment.Center, Enum.HorizontalAlignment.Left)

			local TitleLabel = createStyledEl("TextLabel", LabelHolder, {
				text = Text,
				size = UDim2.new(1.364, -53, 0, 14),
				font = Enum.Font.GothamMedium,
				textSize = 13,
				textColor = CurrentThemeData.TextColor,
				textXAlignment = Enum.TextXAlignment.Left,
				theme = {
					property = "TextColor3",
					themeProperty = "TextColor"
				}
			})

			if Desc then
				SliderFrame.Size = UDim2.new(1, 0, 0, 40)
				local DescLabel = createStyledEl("TextLabel", LabelHolder, {
					text = Desc,
					size = UDim2.new(1, 0, 0, 14),
					font = Enum.Font.Gotham,
					textSize = 12,
					textColor = CurrentThemeData.SubTextColor,
					textXAlignment = Enum.TextXAlignment.Left,
					theme = {
						property = "TextColor3",
						themeProperty = "SubTextColor"
					}
				})
				DescLabel.TextWrapped = true
			else
				SliderFrame.Size = UDim2.new(1, 0, 0, 25)
			end

			local ValueBox = createStyledEl("TextBox", SliderFrame, {
				text = tostring(Value),
				size = UDim2.fromOffset(45, 20),
				position = UDim2.new(1, -215, 0.5, 0),
				font = Enum.Font.Gotham,
				textSize = 12,
				textColor = CurrentThemeData.TextColor,
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = CurrentThemeData.InputValueBoxTransparency or 0.8,
				cornerRadius = 4,
				stroke = {
					color = CurrentThemeData.ElementBorder,
					transparency = CurrentThemeData.InputValueBoxStrokeTransparency or 0.6
				},
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			ValueBox.AnchorPoint = Vector2.new(0, 0.5)

			ValueBox.FocusLost:Connect(function()
				local Num = tonumber(ValueBox.Text)
				if Num then
					Slider:SetValue(Num)
				else
					ValueBox.Text = tostring(Value)
				end
			end)

			local SliderRail = createStyledEl("Frame", SliderFrame, {
				size = UDim2.new(1, 0, 0, 4),
				position = UDim2.new(1, -10, 0.5, 0),
				backgroundColor = CurrentThemeData.SliderRailColor or CurrentThemeData.ElementColor,
				transparency = CurrentThemeData.SliderRailTransparency or 0.4,
				cornerRadius = 1,
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			SliderRail.AnchorPoint = Vector2.new(1, 0.5)

			createSizeConstraint(SliderRail, nil, Vector2.new(150, math.huge))

			local SliderRailInner = createStyledEl("Frame", SliderRail, {
				size = UDim2.new(1, -14, 1, 0),
				position = UDim2.fromOffset(7, 0),
				transparency = 1
			})

			local SliderFill = createStyledEl("Frame", SliderRail, {
				size = UDim2.fromScale((Value - Min) / (Max - Min), 1),
				backgroundColor = CurrentThemeData.SliderFillColor or CurrentThemeData.Accent,
				transparency = CurrentThemeData.SliderFillTransparency or 0,
				cornerRadius = 1,
				theme = {
					property = "BackgroundColor3",
					themeProperty = "Accent"
				}
			})

			local SliderDot = createStyledEl("ImageLabel", SliderRailInner, {
				image = "rbxassetid://12266946128",
				size = UDim2.fromOffset(12, 12),
				position = UDim2.new((Value - Min) / (Max - Min), -7, 0.5, 0),
				imageColor = CurrentThemeData.SliderDotColor or CurrentThemeData.Accent,
				transparency = CurrentThemeData.SliderDotTransparency or 0,
				theme = {
					property = "ImageColor3",
					themeProperty = "Accent"
				}
			})
			SliderDot.AnchorPoint = Vector2.new(0, 0.5)

			local function Round(Num, Bracket)
				if Bracket == 0 then
					return math.floor(Num)
				end
				local NumStr = tostring(Num)
				return NumStr:find("%.") and tonumber(NumStr:sub(1, NumStr:find("%.") + Bracket)) or Num
			end

			local function UpdateSlider(Input)
				local SizeScale = math.clamp((Input.Position.X - SliderRailInner.AbsolutePosition.X) / SliderRailInner.AbsoluteSize.X, 0, 1)
				Value = Round(math.clamp(Min + ((Max - Min) * SizeScale), Min, Max), Rounding)

				tweenProperty(SliderDot, "Position", UDim2.new((Value - Min) / (Max - Min), -7, 0.5, 0), 0.1, Enum.EasingStyle.Quad)
				tweenProperty(SliderFill, "Size", UDim2.fromScale((Value - Min) / (Max - Min), 1), 0.15, Enum.EasingStyle.Quad)
				ValueBox.Text = tostring(Value)

				if Flag then
					flags[Flag].value = Value
					notifyFlagChanged(Flag, Value)
				end
				if Callback then Callback(Value) end
			end

			SliderDot.InputBegan:Connect(function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseButton1 then
					Dragging = true
				end
			end)

			SliderDot.InputEnded:Connect(function(Input)
				if Input.UserInputType == Enum.UserInputType.MouseButton1 then
					Dragging = false
				end
			end)

			Creator.AddSignal(UserInputService.InputChanged, function(Input)
				if Dragging and Input.UserInputType == Enum.UserInputType.MouseMovement then
					UpdateSlider(Input)
				end
			end)

			function Slider:SetValue(NewValue)
				Value = math.clamp(NewValue, Min, Max)
				tweenProperty(SliderDot, "Position", UDim2.new((Value - Min) / (Max - Min), -7, 0.5, 0), 0.15, Enum.EasingStyle.Quad)
				tweenProperty(SliderFill, "Size", UDim2.fromScale((Value - Min) / (Max - Min), 1), 0.15, Enum.EasingStyle.Quad)
				ValueBox.Text = tostring(Value)
				if Flag then
					flags[Flag].value = Value
					notifyFlagChanged(Flag, Value)
				end
				if Callback then Callback(Value) end
			end

			return Slider
		end

		function Tab:AddButton(Text, Desc, Callback)
			if not Text or Text == "" then
				return nil
			end

			local Container = Tab.Content

			local ButtonFrame = createStyledEl("TextButton", Container, {
				size = UDim2.new(1, 0, 0, 0),
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = 0.87,
				cornerRadius = 4,
				stroke = {
					color = CurrentThemeData.ElementBorder,
					transparency = 0.5
				},
				hoverEffects = {
					hover = 0.8,
					normal = 0.87,
					press = 0.94
				},
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			ButtonFrame.AutomaticSize = Enum.AutomaticSize.Y
			ButtonFrame.LayoutOrder = 7

			local LabelHolder = createStyledEl("Frame", ButtonFrame, {
				size = UDim2.new(1, -60, 0, 0),
				position = UDim2.fromOffset(10, 0),
				transparency = 1
			})
			LabelHolder.AutomaticSize = Enum.AutomaticSize.Y

			createListLayout(LabelHolder, 0, Enum.SortOrder.LayoutOrder, Enum.VerticalAlignment.Center)
			createPadding(LabelHolder, 13, 13, 0, 0)

			local TitleLabel = createStyledEl("TextLabel", LabelHolder, {
				text = Text,
				size = UDim2.new(1, 0, 0, 14),
				font = Enum.Font.GothamMedium,
				textSize = 13,
				textColor = CurrentThemeData.TextColor,
				textXAlignment = Enum.TextXAlignment.Left,
				theme = {
					property = "TextColor3",
					themeProperty = "TextColor"
				}
			})

			if Desc then
				local DescLabel = createStyledEl("TextLabel", LabelHolder, {
					text = Desc,
					size = UDim2.new(1, 0, 0, 14),
					font = Enum.Font.Gotham,
					textSize = 12,
					textColor = CurrentThemeData.SubTextColor,
					textXAlignment = Enum.TextXAlignment.Left,
					theme = {
						property = "TextColor3",
						themeProperty = "SubTextColor"
					}
				})
				DescLabel.TextWrapped = true
				DescLabel.AutomaticSize = Enum.AutomaticSize.Y
			end

			local ButtonText = createStyledEl("TextLabel", ButtonFrame, {
				text = "Press",
				size = UDim2.fromOffset(45, 20),
				position = UDim2.new(1, -10, 0.5, 0),
				font = Enum.Font.Gotham,
				textSize = 14,
				textColor = CurrentThemeData.SubTextColor
			})
			ButtonText.AnchorPoint = Vector2.new(1, 0.5)

			ButtonFrame.MouseButton1Click:Connect(function()
				if Callback then
					Callback()
				end
			end)
		end

		function Tab:AddDropdown(Text, Desc, Options, Default, Callback, Flag)
			if not Text or Text == "" then
				return nil
			end

			if not Options or #Options == 0 then
				return nil
			end

			local Dropdown = {}
			local SelectedOption = Default or Options[1]
			local IsOpen = false
			local Container = Tab.Content

			if Flag then
				flags[Flag] = flags[Flag] or {}
				flags[Flag].value = SelectedOption
				flags[Flag].SetValue = function(self, Value)
					SelectedOption = Value
					Dropdown:SetValue(Value)
				end
			end

			local DropdownFrame = createStyledEl("Frame", Container, {
				size = UDim2.new(1, 0, 0, 0),
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = 0.87,
				cornerRadius = 4,
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			DropdownFrame.AutomaticSize = Enum.AutomaticSize.Y
			DropdownFrame.LayoutOrder = 7
			DropdownFrame.ClipsDescendants = true

			local LabelHolder = createStyledEl("Frame", DropdownFrame, {
				size = UDim2.new(1, -60, 0, 0),
				position = UDim2.fromOffset(10, 0),
				transparency = 1
			})
			LabelHolder.AutomaticSize = Enum.AutomaticSize.Y

			createListLayout(LabelHolder, 0, Enum.SortOrder.LayoutOrder, Enum.VerticalAlignment.Center)
			createPadding(LabelHolder, 13, 13, 0, 0)

			local TitleLabel = createStyledEl("TextLabel", LabelHolder, {
				text = Text,
				size = UDim2.new(1, 0, 0, 14),
				font = Enum.Font.GothamMedium,
				textSize = 13,
				textColor = CurrentThemeData.TextColor,
				textXAlignment = Enum.TextXAlignment.Left,
				theme = {
					property = "TextColor3",
					themeProperty = "TextColor"
				}
			})

			if Desc then
				local DescLabel = createStyledEl("TextLabel", LabelHolder, {
					text = Desc,
					size = UDim2.new(1, 0, 0, 14),
					font = Enum.Font.Gotham,
					textSize = 12,
					textColor = CurrentThemeData.SubTextColor,
					textXAlignment = Enum.TextXAlignment.Left,
					theme = {
						property = "TextColor3",
						themeProperty = "SubTextColor"
					}
				})
				DescLabel.TextWrapped = true
				DescLabel.AutomaticSize = Enum.AutomaticSize.Y
			end

			local DropdownButton = Creator.New("TextButton", {
				Parent = DropdownFrame,
				AnchorPoint = Vector2.new(1, 0.5),
				BackgroundColor3 = CurrentThemeData.ElementColor,
				BackgroundTransparency = CurrentThemeData.DropdownButtonTransparency or 0.7,
				BorderSizePixel = 0,
				ClipsDescendants = true,
				Position = UDim2.new(1, -10, 0.5, 0),
				Size = UDim2.new(0, 163, 0, 33),
				AutoButtonColor = false,
				Font = Enum.Font.Cartoon,
				Text = "<",
				TextColor3 = CurrentThemeData.TextColor,
				TextSize = 19,
				TextTransparency = 1,
			}, {
				Creator.New("UICorner", {
					CornerRadius = UDim.new(0, 4),
				}),
			})

			pcall(function()
				attachRipple(DropdownButton)
			end)

			registerThemeObject(DropdownButton, "BackgroundColor3", "ElementColor")

			local ButtonNameLabel = Creator.New("TextLabel", {
				Parent = DropdownButton,
				BackgroundTransparency = 1,
				Position = UDim2.new(0.047537718, 0, 0.234608039, 0),
				Size = UDim2.new(0.970520854, 0, 0.0711563602, 14),
				Font = Enum.Font.GothamMedium,
				Text = SelectedOption,
				TextColor3 = CurrentThemeData.TextColor,
				TextSize = 13,
				TextXAlignment = Enum.TextXAlignment.Left,
			})

			registerThemeObject(ButtonNameLabel, "TextColor3", "TextColor")

			local ButtonArrowLabel = Creator.New("TextLabel", {
				Parent = DropdownButton,
				BackgroundTransparency = 1,
				Position = UDim2.new(0.854965091, 0, 0.239690602, 0),
				Size = UDim2.new(0.127813578, 0, 0.0711563602, 14),
				Font = Enum.Font.GothamBold,
				Text = "V",
				TextColor3 = CurrentThemeData.SubTextColor,
				TextSize = 13,
				TextXAlignment = Enum.TextXAlignment.Left,
			})

			registerThemeObject(ButtonArrowLabel, "TextColor3", "SubTextColor")

			local function OpenDropdown()
				CreateDropdownPopup(DropdownButton, Options, function(Txt) return SelectedOption == Txt end, function(Choice)
					SelectedOption = Choice
					ButtonNameLabel.Text = SelectedOption
					if Flag then
						flags[Flag].value = SelectedOption
						notifyFlagChanged(Flag, SelectedOption)
					end
					if Callback then Callback(SelectedOption) end
				end, false)
			end

			DropdownButton.MouseButton1Click:Connect(OpenDropdown)

			function Dropdown:SetValue(Value)
				SelectedOption = Value
				ButtonNameLabel.Text = SelectedOption
				if Flag then
					flags[Flag].value = SelectedOption
					notifyFlagChanged(Flag, SelectedOption)
				end
			end

			return Dropdown
		end

		function Tab:AddMultiDropdown(Text, Desc, Options, Defaults, Callback, Flag)
			if not Text or Text == "" then
				return nil
			end

			if not Options or #Options == 0 then
				return nil
			end

			local MultiDropdown = {}
			local SelectedOptions = {}
			for _, V in ipairs(Defaults or {}) do
				SelectedOptions[V] = true
			end
			local IsOpen = false
			local Container = Tab.Content

			if Flag then
				flags[Flag] = flags[Flag] or {}
				flags[Flag].value = SelectedOptions
				flags[Flag].SetValue = function(self, Value)
					SelectedOptions = Value
					MultiDropdown:SetValue(Value)
				end
			end

			local function GetSelectedText()
				local Selected = {}
				for Opt, IsSelected in pairs(SelectedOptions) do
					if IsSelected then
						table.insert(Selected, Opt)
					end
				end
				return #Selected > 0 and table.concat(Selected, ", ") or "None"
			end

			local MultiDropdownFrame = createStyledEl("Frame", Container, {
				size = UDim2.new(1, 0, 0, 0),
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = 0.87,
				cornerRadius = 4,
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			MultiDropdownFrame.AutomaticSize = Enum.AutomaticSize.Y
			MultiDropdownFrame.LayoutOrder = 7
			MultiDropdownFrame.ClipsDescendants = true

			local LabelHolder = createStyledEl("Frame", MultiDropdownFrame, {
				size = UDim2.new(1, -60, 0, 0),
				position = UDim2.fromOffset(10, 0),
				transparency = 1
			})
			LabelHolder.AutomaticSize = Enum.AutomaticSize.Y

			createListLayout(LabelHolder, 0, Enum.SortOrder.LayoutOrder, Enum.VerticalAlignment.Center)
			createPadding(LabelHolder, 13, 13, 0, 0)

			local TitleLabel = createStyledEl("TextLabel", LabelHolder, {
				text = Text,
				size = UDim2.new(1, 0, 0, 14),
				font = Enum.Font.GothamMedium,
				textSize = 13,
				textColor = CurrentThemeData.TextColor,
				textXAlignment = Enum.TextXAlignment.Left,
				theme = {
					property = "TextColor3",
					themeProperty = "TextColor"
				}
			})

			if Desc then
				local DescLabel = createStyledEl("TextLabel", LabelHolder, {
					text = Desc,
					size = UDim2.new(1, 0, 0, 14),
					font = Enum.Font.Gotham,
					textSize = 12,
					textColor = CurrentThemeData.SubTextColor,
					textXAlignment = Enum.TextXAlignment.Left,
					theme = {
						property = "TextColor3",
						themeProperty = "SubTextColor"
					}
				})
				DescLabel.TextWrapped = true
				DescLabel.AutomaticSize = Enum.AutomaticSize.Y
			end

			local MultiDropdownButton = Creator.New("TextButton", {
				Parent = MultiDropdownFrame,
				AnchorPoint = Vector2.new(1, 0.5),
				BackgroundColor3 = CurrentThemeData.ElementColor,
				BackgroundTransparency = 0.7,
				BorderSizePixel = 0,
				ClipsDescendants = true,
				Position = UDim2.new(1, -10, 0.5, 0),
				Size = UDim2.new(0, 163, 0, 33),
				AutoButtonColor = false,
				Font = Enum.Font.Cartoon,
				Text = "<",
				TextColor3 = CurrentThemeData.TextColor,
				TextSize = 19,
				TextTransparency = 1,
			}, {
				Creator.New("UICorner", {
					CornerRadius = UDim.new(0, 4),
				}),
			})

			pcall(function()
				attachRipple(MultiDropdownButton)
			end)

			registerThemeObject(MultiDropdownButton, "BackgroundColor3", "ElementColor")

			local MultiButtonNameLabel = Creator.New("TextLabel", {
				Parent = MultiDropdownButton,
				BackgroundTransparency = 1,
				Position = UDim2.new(0.047537718, 0, 0.234608039, 0),
				Size = UDim2.new(0.970520854, 0, 0.0711563602, 14),
				Font = Enum.Font.GothamMedium,
				Text = GetSelectedText(),
				TextColor3 = CurrentThemeData.TextColor,
				TextSize = 13,
				TextXAlignment = Enum.TextXAlignment.Left,
			})

			registerThemeObject(MultiButtonNameLabel, "TextColor3", "TextColor")

			local MultiButtonArrowLabel = Creator.New("TextLabel", {
				Parent = MultiDropdownButton,
				BackgroundTransparency = 1,
				Position = UDim2.new(0.854965091, 0, 0.239690602, 0),
				Size = UDim2.new(0.127813578, 0, 0.0711563602, 14),
				Font = Enum.Font.GothamBold,
				Text = "V",
				TextColor3 = CurrentThemeData.SubTextColor,
				TextSize = 13,
				TextXAlignment = Enum.TextXAlignment.Left,
			})

			registerThemeObject(MultiButtonArrowLabel, "TextColor3", "SubTextColor")

			local function OpenMultiDropdown()
				CreateDropdownPopup(MultiDropdownButton, Options, function(Txt) return SelectedOptions[Txt] == true end, function(Choice)
					SelectedOptions[Choice] = not SelectedOptions[Choice]
					MultiButtonNameLabel.Text = GetSelectedText()
					if Flag then
						flags[Flag].value = SelectedOptions
						notifyFlagChanged(Flag, SelectedOptions)
					end
					if Callback then Callback(SelectedOptions) end
					return true
				end, true)
			end

			MultiDropdownButton.MouseButton1Click:Connect(OpenMultiDropdown)

			function MultiDropdown:SetValue(Value)
				SelectedOptions = Value
				MultiButtonNameLabel.Text = GetSelectedText()
				if Flag then
					flags[Flag].value = SelectedOptions
					notifyFlagChanged(Flag, SelectedOptions)
				end
			end

			function MultiDropdown:GetSelected()
				return SelectedOptions
			end

			return MultiDropdown
		end

		function Tab:AddKeybind(Text, Desc, Default, Mode, Callback, Flag)
			if not Text or Text == "" then
				return nil
			end

			local Keybind = {}
			local CurrentKey = Default or "None"
			local CurrentMode = Mode or "Toggle"
			local IsPicking = false
			local Container = Tab.Content

			if Flag then
				flags[Flag] = flags[Flag] or {}
				flags[Flag].value = { key = CurrentKey, mode = CurrentMode, toggled = false }
				flags[Flag].SetValue = function(self, Value, NewMode)
					CurrentKey = Value
					CurrentMode = NewMode or CurrentMode
					Keybind:SetValue(Value, NewMode)
				end
			end

			local KeybindFrame = createStyledEl("Frame", Container, {
				size = UDim2.new(1, 0, 0, 0),
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = 0.87,
				cornerRadius = 4,
				hoverEffects = {
					hover = 0.8,
					normal = 0.87,
					press = 0.94
				},
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			KeybindFrame.AutomaticSize = Enum.AutomaticSize.Y
			KeybindFrame.LayoutOrder = 7

			local LabelHolder = createStyledEl("Frame", KeybindFrame, {
				size = UDim2.new(1, -120, 0, 0),
				position = UDim2.fromOffset(10, 0),
				transparency = 1
			})
			LabelHolder.AutomaticSize = Enum.AutomaticSize.Y

			createListLayout(LabelHolder, 0, Enum.SortOrder.LayoutOrder, Enum.VerticalAlignment.Center)
			createPadding(LabelHolder, 13, 13, 0, 0)

			local TitleLabel = createStyledEl("TextLabel", LabelHolder, {
				text = Text,
				size = UDim2.new(1, 0, 0, 14),
				font = Enum.Font.GothamMedium,
				textSize = 13,
				textColor = CurrentThemeData.TextColor,
				textXAlignment = Enum.TextXAlignment.Left,
				theme = {
					property = "TextColor3",
					themeProperty = "TextColor"
				}
			})

			if Desc then
				local DescLabel = createStyledEl("TextLabel", LabelHolder, {
					text = Desc,
					size = UDim2.new(1, 0, 0, 14),
					font = Enum.Font.Gotham,
					textSize = 12,
					textColor = CurrentThemeData.SubTextColor,
					textXAlignment = Enum.TextXAlignment.Left,
					theme = {
						property = "TextColor3",
						themeProperty = "SubTextColor"
					}
				})
				DescLabel.TextWrapped = true
				DescLabel.AutomaticSize = Enum.AutomaticSize.Y
			end

			local KeybindButton = createStyledEl("TextButton", KeybindFrame, {
				size = UDim2.fromOffset(80, 30),
				position = UDim2.new(1, -10, 0.5, 0),
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = CurrentThemeData.KeybindButtonTransparency or 0.9,
				cornerRadius = 4,
				noRipple = true,
				stroke = {
					color = CurrentThemeData.ElementBorder,
					transparency = CurrentThemeData.KeybindButtonStrokeTransparency or 0.5
				},
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			KeybindButton.AnchorPoint = Vector2.new(1, 0.5)
			KeybindButton.Text = CurrentKey
			KeybindButton.Font = Enum.Font.Gotham
			KeybindButton.TextColor3 = CurrentThemeData.TextColor
			KeybindButton.TextSize = 12
			KeybindButton.AutoButtonColor = false

			function Keybind:GetState()
				if UserInputService:GetFocusedTextBox() and CurrentMode ~= "Always" then
					return false
				end

				if CurrentMode == "Always" then
					return true
				elseif CurrentMode == "Hold" then
					if CurrentKey == "None" then
						return false
					end

					if CurrentKey == "MouseLeft" or CurrentKey == "MouseRight" then
						return CurrentKey == "MouseLeft" and UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton1)
							or CurrentKey == "MouseRight" and UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton2)
					else
						return UserInputService:IsKeyDown(Enum.KeyCode[CurrentKey])
					end
				else
					return Keybind.Toggled or false
				end
			end

			function Keybind:SetValue(Key, NewMode)
				CurrentKey = Key or CurrentKey
				CurrentMode = NewMode or CurrentMode
				KeybindButton.Text = CurrentKey
				if Flag then
					flags[Flag].value = { key = CurrentKey, mode = CurrentMode, toggled = Keybind.Toggled or false }
					notifyFlagChanged(Flag, flags[Flag].value)
				end
				if Callback then
					Callback(CurrentKey, CurrentMode, Keybind.Toggled or false)
				end
			end

			KeybindButton.MouseButton1Click:Connect(function()
				if not IsPicking then
					IsPicking = true
					KeybindButton.Text = "..."

					task.wait(0.2)

					local Connection
					Connection = Creator.AddSignal(UserInputService.InputBegan, function(Input)
						local Key

						if Input.UserInputType == Enum.UserInputType.Keyboard then
							Key = Input.KeyCode.Name
						elseif Input.UserInputType == Enum.UserInputType.MouseButton1 then
							Key = "MouseLeft"
						elseif Input.UserInputType == Enum.UserInputType.MouseButton2 then
							Key = "MouseRight"
						end

						if Key then
							IsPicking = false
							Keybind:SetValue(Key)
							Connection:Disconnect()
						end
					end)
				end
			end)

			Creator.AddSignal(UserInputService.InputBegan, function(Input)
				if not IsPicking and not UserInputService:GetFocusedTextBox() then
					if CurrentMode == "Toggle" then
						if CurrentKey == "MouseLeft" or CurrentKey == "MouseRight" then
							if (CurrentKey == "MouseLeft" and Input.UserInputType == Enum.UserInputType.MouseButton1)
								or (CurrentKey == "MouseRight" and Input.UserInputType == Enum.UserInputType.MouseButton2) then
								Keybind.Toggled = not Keybind.Toggled
								if Flag then
									flags[Flag].value = { key = CurrentKey, mode = CurrentMode, toggled = Keybind.Toggled }
									notifyFlagChanged(Flag, flags[Flag].value)
								end
								if Callback then
									Callback(CurrentKey, CurrentMode, Keybind.Toggled)
								end
							end
						elseif Input.UserInputType == Enum.UserInputType.Keyboard then
							if Input.KeyCode.Name == CurrentKey then
								Keybind.Toggled = not Keybind.Toggled
								if Flag then
									flags[Flag].value = { key = CurrentKey, mode = CurrentMode, toggled = Keybind.Toggled }
									notifyFlagChanged(Flag, flags[Flag].value)
								end
								if Callback then
									Callback(CurrentKey, CurrentMode, Keybind.Toggled)
								end
							end
						end
					end
				end
			end)

			return Keybind
		end

		function Tab:AddInput(Text, Desc, Placeholder, Default, Numeric, MaxLength, Callback, Flag)
			if not Text or Text == "" then
				return nil
			end

			local Input = {}
			local CurrentValue = Default or ""
			local Container = Tab.Content

			if Flag then
				flags[Flag] = flags[Flag] or {}
				flags[Flag].value = CurrentValue
				flags[Flag].SetValue = function(self, Value)
					CurrentValue = Value
					Input:SetValue(Value)
				end
			end

			local InputFrame = createStyledEl("Frame", Container, {
				size = UDim2.new(1, 0, 0, 0),
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = CurrentThemeData.InputTransparency or 0.87,
				cornerRadius = 4,
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			InputFrame.AutomaticSize = Enum.AutomaticSize.Y
			InputFrame.LayoutOrder = 7

			local LabelHolder = createStyledEl("Frame", InputFrame, {
				size = UDim2.new(1, -180, 0, 0),
				position = UDim2.fromOffset(10, 0),
				transparency = 1
			})
			LabelHolder.AutomaticSize = Enum.AutomaticSize.Y

			createListLayout(LabelHolder, 0, Enum.SortOrder.LayoutOrder, Enum.VerticalAlignment.Center)
			createPadding(LabelHolder, 13, 13, 0, 0)

			local TitleLabel = createStyledEl("TextLabel", LabelHolder, {
				text = Text,
				size = UDim2.new(1, 0, 0, 14),
				font = Enum.Font.GothamMedium,
				textSize = 13,
				textColor = CurrentThemeData.TextColor,
				textXAlignment = Enum.TextXAlignment.Left,
				theme = {
					property = "TextColor3",
					themeProperty = "TextColor"
				}
			})

			if Desc then
				local DescLabel = createStyledEl("TextLabel", LabelHolder, {
					text = Desc,
					size = UDim2.new(1, 0, 0, 14),
					font = Enum.Font.Gotham,
					textSize = 12,
					textColor = CurrentThemeData.SubTextColor,
					textXAlignment = Enum.TextXAlignment.Left,
					theme = {
						property = "TextColor3",
						themeProperty = "SubTextColor"
					}
				})
				DescLabel.TextWrapped = true
				DescLabel.AutomaticSize = Enum.AutomaticSize.Y
			end

			local TextBox = createStyledEl("TextBox", InputFrame, {
				text = CurrentValue,
				size = UDim2.fromOffset(160, 30),
				position = UDim2.new(1, -10, 0.5, 0),
				font = Enum.Font.Gotham,
				textSize = 12,
				textColor = CurrentThemeData.TextColor,
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = 0.7,
				cornerRadius = 4,
				stroke = {
					color = CurrentThemeData.ElementBorder,
					transparency = 0.6
				},
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			TextBox.AnchorPoint = Vector2.new(1, 0.5)
			TextBox.PlaceholderText = Placeholder or ""

			function Input:SetValue(Value)
				if MaxLength and #Value > MaxLength then
					Value = Value:sub(1, MaxLength)
				end

				if Numeric and Value ~= "" then
					if not tonumber(Value) then
						Value = CurrentValue
					end
				end

				CurrentValue = Value
				TextBox.Text = Value
				if Flag then
					flags[Flag].value = CurrentValue
					notifyFlagChanged(Flag, CurrentValue)
				end
				if Callback then Callback(CurrentValue) end
			end

			TextBox.FocusLost:Connect(function(EnterPressed)
				if EnterPressed then
					Input:SetValue(TextBox.Text)
				end
			end)

			TextBox:GetPropertyChangedSignal("Text"):Connect(function()
				Input:SetValue(TextBox.Text)
			end)

			return Input
		end

		function Tab:AddParagraph(Title, Content)
			if not Title or Title == "" then
				Title = "Paragraph"
			end
			if not Content then
				Content = ""
			end

			local Container = Tab.Content

			local ParagraphFrame = createStyledEl("Frame", Container, {
				size = UDim2.new(1, 0, 0, 60),
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = 0.87,
				cornerRadius = 4,
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			ParagraphFrame.AutomaticSize = Enum.AutomaticSize.Y
			ParagraphFrame.LayoutOrder = 7

			createPadding(ParagraphFrame, 0, 5, 0, 0)

			local ParagraphTitle = createStyledEl("TextLabel", ParagraphFrame, {
				text = Title,
				size = UDim2.new(1, -20, 0, 18),
				position = UDim2.fromOffset(10, 5),
				font = Enum.Font.GothamBold,
				textSize = 14,
				textColor = CurrentThemeData.TextColor,
				textXAlignment = Enum.TextXAlignment.Left,
				theme = {
					property = "TextColor3",
					themeProperty = "TextColor"
				}
			})

			local ParagraphContent = createStyledEl("TextLabel", ParagraphFrame, {
				text = Content,
				size = UDim2.new(1, -20, 0, 30),
				position = UDim2.fromOffset(10, 25),
				font = Enum.Font.Gotham,
				textSize = 12,
				textColor = Color3.fromRGB(180, 180, 180),
				textXAlignment = Enum.TextXAlignment.Left,
				textYAlignment = Enum.TextYAlignment.Top,
				textWrapped = true,
				automaticSize = Enum.AutomaticSize.Y
			})

			return ParagraphFrame
		end

		function Tab:AddRGBPicker(Text, Desc, Default, Callback, Flag)
			if not Text or Text == "" then
				return nil
			end

			local RGBPicker = {}
			local CurrentColor = Default or Color3.fromRGB(255, 255, 255)
			local IsOpen = false
			local Container = Tab.Content

			if Flag then
				flags[Flag] = flags[Flag] or {}
				flags[Flag].value = CurrentColor
				flags[Flag].SetValue = function(self, Value)
					CurrentColor = Value
					if RGBPicker.SetValue then
						RGBPicker:SetValue(Value)
					end
				end
			end

			local RGBFrame = createStyledEl("Frame", Container, {
				size = UDim2.new(1, 0, 0, 0),
				transparency = 1
			})
			RGBFrame.LayoutOrder = 7
			RGBFrame.ClipsDescendants = true

			local RGBButton = createStyledEl("TextButton", RGBFrame, {
				size = UDim2.new(1, 0, 0, 0),
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = 0.87,
				cornerRadius = 4,
				stroke = {
					color = CurrentThemeData.ElementBorder,
					transparency = 0.5
				},
				hoverEffects = {
					hover = 0.8,
					normal = 0.87,
					press = 0.94
				},
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			RGBButton.AutomaticSize = Enum.AutomaticSize.Y
			RGBButton.Text = ""
			RGBButton.AutoButtonColor = false

			local LabelHolder = createStyledEl("Frame", RGBButton, {
				size = UDim2.new(1, -64, 0, 0),
				position = UDim2.fromOffset(10, 0),
				transparency = 1
			})
			LabelHolder.AutomaticSize = Enum.AutomaticSize.Y

			createListLayout(LabelHolder, 0, Enum.SortOrder.LayoutOrder, Enum.VerticalAlignment.Center)
			createPadding(LabelHolder, 13, 13, 0, 0)

			local TitleLabel = createStyledEl("TextLabel", LabelHolder, {
				text = Text,
				size = UDim2.new(1, 0, 0, 14),
				font = Enum.Font.GothamMedium,
				textSize = 13,
				textColor = CurrentThemeData.TextColor,
				textXAlignment = Enum.TextXAlignment.Left,
				theme = {
					property = "TextColor3",
					themeProperty = "TextColor"
				}
			})

			if Desc then
				local DescLabel = createStyledEl("TextLabel", LabelHolder, {
					text = Desc,
					size = UDim2.new(1, 0, 0, 14),
					font = Enum.Font.Gotham,
					textSize = 12,
					textColor = CurrentThemeData.SubTextColor,
					textXAlignment = Enum.TextXAlignment.Left,
					theme = {
						property = "TextColor3",
						themeProperty = "SubTextColor"
					}
				})
				DescLabel.TextWrapped = true
				DescLabel.AutomaticSize = Enum.AutomaticSize.Y
			end

			local ColorPreview = createStyledEl("Frame", RGBButton, {
				size = UDim2.fromOffset(26, 14),
				position = UDim2.new(1, -10, 0.5, 0),
				backgroundColor = CurrentColor,
				transparency = CurrentThemeData.ColorPreviewTransparency or 0,
				cornerRadius = 300
			})
			ColorPreview.AnchorPoint = Vector2.new(1, 0.5)

			local SlidersContainer = createStyledEl("Frame", RGBFrame, {
				size = UDim2.new(1, 0, 0, 0),
				position = UDim2.fromOffset(0, 60),
				backgroundColor = CurrentThemeData.ElementColor,
				transparency = CurrentThemeData.RGBSlidersContainerTransparency or 0.87,
				cornerRadius = 4,
				stroke = {
					color = CurrentThemeData.ElementBorder,
					transparency = CurrentThemeData.RGBSlidersContainerStrokeTransparency or 0.5
				},
				theme = {
					property = "BackgroundColor3",
					themeProperty = "ElementColor"
				}
			})
			SlidersContainer.ClipsDescendants = true

			createListLayout(SlidersContainer, 8, Enum.SortOrder.LayoutOrder)
			createPadding(SlidersContainer, 10, 10, 10, 10)

			local function CreateColorSlider(ColorName, ColorIndex, InitialValue)
				local SliderFrame = createStyledEl("Frame", SlidersContainer, {
					size = UDim2.new(1, 0, 0, 30),
					transparency = 1
				})
				createCorner(SliderFrame, 4)

				local SliderLabel = createStyledEl("TextLabel", SliderFrame, {
					text = ColorName,
					size = UDim2.fromOffset(15, 12),
					position = UDim2.fromOffset(0, 0),
					font = Enum.Font.GothamMedium,
					textSize = 11,
					textColor = CurrentThemeData.TextColor,
					textXAlignment = Enum.TextXAlignment.Left,
					backgroundTransparency = 1,
					theme = {
						property = "TextColor3",
						themeProperty = "TextColor"
					}
				})

				local SliderValue = createStyledEl("TextBox", SliderFrame, {
					size = UDim2.fromOffset(30, 12),
					position = UDim2.new(1, 0, 0, 0),
					text = tostring(InitialValue),
					font = Enum.Font.Gotham,
					textSize = 11,
					textColor = CurrentThemeData.Accent,
					backgroundTransparency = 1,
					textXAlignment = Enum.TextXAlignment.Right,
					theme = {
						property = "TextColor3",
						themeProperty = "Accent"
					}
				})
				SliderValue.AnchorPoint = Vector2.new(1, 0)
				SliderValue.ClearTextOnFocus = false
				SliderValue.TextEditable = true

				local SliderBar = createStyledEl("Frame", SliderFrame, {
					size = UDim2.new(1, 0, 0, 6),
					position = UDim2.fromOffset(0, 18),
					backgroundColor = Color3.fromRGB(55, 55, 55),
					transparency = CurrentThemeData.RGBSliderBarTransparency or 0,
					cornerRadius = 300,
					name = "sliderBar"
				})

				local SliderFill = createStyledEl("Frame", SliderBar, {
					size = UDim2.new(InitialValue / 255, 0, 1, 0),
					backgroundColor = CurrentThemeData.Accent,
					transparency = 0,
					cornerRadius = 300,
					theme = {
						property = "BackgroundColor3",
						themeProperty = "Accent"
					}
				})
				createCorner(SliderFill, 1)

				local SliderKnob = createStyledEl("Frame", SliderBar, {
					size = UDim2.fromOffset(12, 12),
					position = UDim2.new(InitialValue / 255, 0, 0.5, 0),
					backgroundColor = CurrentThemeData.Accent,
					transparency = 0,
					cornerRadius = 300,
					theme = {
						property = "BackgroundColor3",
						themeProperty = "Accent"
					}
				})
				SliderKnob.AnchorPoint = Vector2.new(0.5, 0.5)

				local SliderButton = createStyledEl("TextButton", SliderBar, {
					size = UDim2.new(1, 0, 1, 0),
					transparency = 1,
					text = ""
				})

				local CurrentSliderValue = InitialValue
				local Dragging = false

				local function UpdateSlider(MousePos)
					local Pos = math.clamp((MousePos.X - SliderBar.AbsolutePosition.X) / SliderBar.AbsoluteSize.X, 0, 1)
					CurrentSliderValue = math.floor(Pos * 255 + 0.5)
					CurrentSliderValue = math.clamp(CurrentSliderValue, 0, 255)

					tweenProperty(SliderFill, "Size", UDim2.new(CurrentSliderValue / 255, 0, 1, 0), 0.1, Enum.EasingStyle.Quad)
					tweenProperty(SliderKnob, "Position", UDim2.new(CurrentSliderValue / 255, 0, 0.5, 0), 0.1, Enum.EasingStyle.Quad)

					SliderValue.Text = tostring(CurrentSliderValue)
					local R, G, B = CurrentColor.R * 255, CurrentColor.G * 255, CurrentColor.B * 255
					if ColorIndex == 1 then R = CurrentSliderValue
					elseif ColorIndex == 2 then G = CurrentSliderValue
					else B = CurrentSliderValue end
					CurrentColor = Color3.fromRGB(R, G, B)
					ColorPreview.BackgroundColor3 = CurrentColor
					if Flag then
						flags[Flag].value = CurrentColor
						notifyFlagChanged(Flag, CurrentColor)
					end
					if Callback then Callback(CurrentColor) end
				end

				SliderButton.MouseButton1Down:Connect(function()
					Dragging = true
				end)

				Creator.AddSignal(UserInputService.InputEnded, function(Input)
					if Input.UserInputType == Enum.UserInputType.MouseButton1 then
						Dragging = false
					end
				end)

				Creator.AddSignal(UserInputService.InputChanged, function(Input)
					if Dragging and Input.UserInputType == Enum.UserInputType.MouseMovement then
						UpdateSlider(Input.Position)
					end
				end)

				SliderButton.MouseButton1Click:Connect(function()
					local MousePos = UserInputService:GetMouseLocation()
					UpdateSlider(MousePos)
				end)

				SliderValue.FocusLost:Connect(function()
					local InputValue = tonumber(SliderValue.Text)
					if InputValue then
						CurrentSliderValue = math.floor(InputValue + 0.5)
						CurrentSliderValue = math.clamp(CurrentSliderValue, 0, 255)

						tweenProperty(SliderFill, "Size", UDim2.new(CurrentSliderValue / 255, 0, 1, 0), 0.2, Enum.EasingStyle.Quad)
						tweenProperty(SliderKnob, "Position", UDim2.new(CurrentSliderValue / 255, 0, 0.5, 0), 0.2, Enum.EasingStyle.Quad)

						SliderValue.Text = tostring(CurrentSliderValue)
						local R, G, B = CurrentColor.R * 255, CurrentColor.G * 255, CurrentColor.B * 255
						if ColorIndex == 1 then R = CurrentSliderValue
						elseif ColorIndex == 2 then G = CurrentSliderValue
						else B = CurrentSliderValue end
						CurrentColor = Color3.fromRGB(R, G, B)
						ColorPreview.BackgroundColor3 = CurrentColor
						if Callback then
							Callback(CurrentColor)
						end
					else
						SliderValue.Text = tostring(CurrentSliderValue)
					end
				end)

				return {
					SetValue = function(Value)
						CurrentSliderValue = math.clamp(Value, 0, 255)
						tweenProperty(SliderFill, "Size", UDim2.new(CurrentSliderValue / 255, 0, 1, 0), 0.2, Enum.EasingStyle.Quad)
						tweenProperty(SliderKnob, "Position", UDim2.new(CurrentSliderValue / 255, 0, 0.5, 0), 0.2, Enum.EasingStyle.Quad)
						SliderValue.Text = tostring(CurrentSliderValue)
					end
				}
			end

			local RSlider = CreateColorSlider("R", 1, math.floor(CurrentColor.R * 255))
			local GSlider = CreateColorSlider("G", 2, math.floor(CurrentColor.G * 255))
			local BSlider = CreateColorSlider("B", 3, math.floor(CurrentColor.B * 255))

			local function TweenRGBLabels(Transparency)
				for _, Child in ipairs(SlidersContainer:GetChildren()) do
					if Child:IsA("Frame") then
						local Label = Child:FindFirstChild("TextLabel")
						local Value = Child:FindFirstChild("TextBox")
						if Label then
							tweenProperty(Label, "TextTransparency", Transparency, 0.3)
						end
						if Value then
							tweenProperty(Value, "TextTransparency", Transparency, 0.3)
						end
					end
				end
			end

			task.wait()
			local ButtonHeight = RGBButton.AbsoluteSize.Y
			RGBFrame.Size = UDim2.new(1, 0, 0, ButtonHeight)

			RGBButton.MouseButton1Click:Connect(function()
				IsOpen = not IsOpen
				if IsOpen then
					tweenProperty(RGBFrame, "Size", UDim2.new(1, 0, 0, ButtonHeight + 133), 0.4, Enum.EasingStyle.Quint)
					tweenProperty(SlidersContainer, "Size", UDim2.new(1, 0, 0, 130), 0.4, Enum.EasingStyle.Quint)
					TweenRGBLabels(0)
				else
					TweenRGBLabels(1)
					tweenProperty(RGBFrame, "Size", UDim2.new(1, 0, 0, ButtonHeight), 0.4, Enum.EasingStyle.Quint)
					tweenProperty(SlidersContainer, "Size", UDim2.new(1, 0, 0, 0), 0.4, Enum.EasingStyle.Quint)
				end
			end)

			function RGBPicker:SetValue(Color)
				CurrentColor = Color
				ColorPreview.BackgroundColor3 = Color
				RSlider.SetValue(math.floor(Color.R * 255))
				GSlider.SetValue(math.floor(Color.G * 255))
				BSlider.SetValue(math.floor(Color.B * 255))
				if Flag then
					flags[Flag].value = CurrentColor
					notifyFlagChanged(Flag, CurrentColor)
				end
			end

			return RGBPicker
		end

		return Tab
	end

	function Window:SelectTab(TabIndex)
		if not TabIndex or not Window.tabs[TabIndex] then
			return false
		end
		if tick() - LastTabSwitch >= TabSwitchInterval then
			Window.selectedTab = TabIndex

			for _, TabObj in pairs(Window.tabs) do
				TabObj.Selected = false
				tweenProperty(TabObj.Frame, "BackgroundTransparency", 1, 0.2, Enum.EasingStyle.Quad)
				tweenProperty(TabObj.Label, "TextColor3", Color3.fromRGB(135, 135, 140), 0.2, Enum.EasingStyle.Quad)
				if TabObj.Icon then
					tweenProperty(TabObj.Icon, "ImageColor3", Color3.fromRGB(135, 135, 140), 0.2, Enum.EasingStyle.Quad)
				end
				TabObj.Content.Visible = false
			end

			local SelectedTab = Window.tabs[TabIndex]
			SelectedTab.Selected = true
			tweenProperty(SelectedTab.Frame, "BackgroundTransparency", 0.65, 0.2, Enum.EasingStyle.Quad)
			tweenProperty(SelectedTab.Label, "TextColor3", Color3.fromRGB(245, 245, 250), 0.2, Enum.EasingStyle.Quad)
			if SelectedTab.Icon then
				tweenProperty(SelectedTab.Icon, "ImageColor3", Color3.fromRGB(245, 245, 250), 0.2, Enum.EasingStyle.Quad)
			end
			SelectedTab.Content.Visible = true

			TabSelectedLineMover.BackgroundTransparency = 0.24
			local OldTabButtonLine = TabButtonLines[1]
			if OldTabButtonLine then
				OldTabButtonLine.BackgroundTransparency = 1
				OldTabButtonLine = nil
			end

			table.clear(TabButtonLines)

			local TabButtonIndicatorGuider = SelectedTab.IndicatorGuider
			local GuiderAbsolutePos = TabButtonIndicatorGuider.AbsolutePosition
			local GuiderAbsoluteSize = TabButtonIndicatorGuider.AbsoluteSize
			local MainFrameAbsolutePos = MainFrame.AbsolutePosition

			local OffsetX = GuiderAbsolutePos.X - MainFrameAbsolutePos.X
			local OffsetY = GuiderAbsolutePos.Y - MainFrameAbsolutePos.Y
			local TargetHeight = GuiderAbsoluteSize.Y

			local oldY = TabSelectedLineMover.AbsolutePosition.Y
			local newY = OffsetY

			local movingDown = newY > oldY

			TabSelectedLineMover.AnchorPoint = movingDown and Vector2.new(0, 1) or Vector2.new(0, 0)

			local TargetPosition
			if movingDown then
				TargetPosition = UDim2.new(0, OffsetX, 0, OffsetY + TargetHeight)
			else
				TargetPosition = UDim2.new(0, OffsetX, 0, OffsetY)
			end

			local TargetSize = UDim2.new(0, 4, 0, TargetHeight)
			local OvershootSize = UDim2.new(0, 4, 0, TargetHeight + 6)

			tweenProperty(TabSelectedLineMover, "Position", TargetPosition, 0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
			tweenProperty(TabSelectedLineMover, "Size", OvershootSize, 0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

			task.delay(0.15, function()
				tweenProperty(TabSelectedLineMover, "Size", TargetSize, 0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
			end)
				task.delay(0.5, function()
				TabSelectedLineMover.BackgroundTransparency = 1
				TabButtonIndicatorGuider.BackgroundTransparency = 0.24
				table.insert(TabButtonLines, TabButtonIndicatorGuider)
			end)


			LastTabSwitch = tick()

			return true
		end
	end

	tweenProperty(MainFrame, "Size", WindowSize, 0.5)

	activeWindow = Window
	currentWindow = Window

	SetAcrylic(Window.Acrylic)
	SetTheme(currentTheme)

	task.spawn(function()
		task.wait(5)
		if Config.Theme then
			SetTheme(Config.Theme)
		end
	end)

	local ConnectionCleanup = Creator.AddSignal(RunService.Heartbeat, function()
		if not ScreenGui.Parent then
			cleanupExistingUI()
		end
	end)

	return Window
end

Vynixus.CreateWindow = CreateWindow

local NotificationsModule = MODULES.Notifications()
if NotificationsModule and type(NotificationsModule) == "table" then
	Vynixus.Notifications = NotificationsModule
	Vynixus.SendNotification = function(message, titleText)
		if Vynixus.Notifications and Vynixus.Notifications.SendNotification then
			Vynixus.Notifications.SendNotification(message, titleText)
		end
	end
	Vynixus.ClearNotifications = function()
		if Vynixus.Notifications and Vynixus.Notifications.ClearNotifications then
			Vynixus.Notifications.ClearNotifications()
		end
	end
	Vynixus.GetNotificationSettings = function()
		if Vynixus.Notifications and Vynixus.Notifications.GetNotificationSettings then
			return Vynixus.Notifications.GetNotificationSettings()
		end
	end
else
	warn("Failed to load Notifications module")
	Vynixus.Notifications = {}
	Vynixus.SendNotification = function() end
	Vynixus.ClearNotifications = function() end
	Vynixus.GetNotificationSettings = function() return {} end
end

return Vynixus
